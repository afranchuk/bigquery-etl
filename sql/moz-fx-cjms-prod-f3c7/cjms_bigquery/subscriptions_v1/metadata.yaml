friendly_name: Stripe subscriptions attributed to CJ flows
description: Stripe subscriptions attributed to CJ flows
owners:
  - srose@mozilla.com
labels:
  application: cjms
  schedule: hourly
scheduling:
  dag_name: bqetl_subplat
  query_project: moz-fx-data-shared-prod
  # destination is the whole table, not a single partition,
  # so don't use date_partition_parameter
  date_partition_parameter: null
  # Adjust the execution delta for the task dependencies in the bqetl_subplat_hourly DAG
  # so this depends on the last hourly DAG run for the same date.
  depends_on:
    - dag_name: bqetl_subplat_hourly
      task_id: stripe_external__coupon__v1
      execution_delta: -21h45m
    - dag_name: bqetl_subplat_hourly
      task_id: stripe_external__invoice__v1
      execution_delta: -21h45m
    - dag_name: bqetl_subplat_hourly
      task_id: stripe_external__invoice_discount__v1
      execution_delta: -21h45m
    - dag_name: bqetl_subplat_hourly
      task_id: stripe_external__promotion_code__v1
      execution_delta: -21h45m
    - dag_name: bqetl_subplat_hourly
      task_id: subscription_platform_derived__stripe_subscriptions__v1
      execution_delta: -21h45m
