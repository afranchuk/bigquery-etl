friendly_name: Contextual Services Event Aggregates
description: |-
  Aggregated event and user counts for topsites and quicksuggest
owners:
  - rburwei@mozilla.com
labels:
  incremental: true
  schedule: daily
scheduling:
  dag_name: bqetl_ctxsvc_derived
  arguments: ['--schema_update_option=ALLOW_FIELD_ADDITION']
bigquery:
  time_partitioning:
    type: day
    field: submission_date
    require_partition_filter: true
  clustering:
    fields:
      - source
      - event_type

# Generated by bigquery_etl.dependency
references:
  query.sql:
  - contextual_services.quicksuggest_click
  - contextual_services.quicksuggest_impression
  - contextual_services.topsites_click
  - contextual_services.topsites_impression
  - org_mozilla_fenix.topsites_impression
  - org_mozilla_firefox.topsites_impression
  - org_mozilla_firefox_beta.topsites_impression
  - org_mozilla_ios_firefox.topsites_impression
  - org_mozilla_ios_firefoxbeta.topsites_impression
