friendly_name: Klar Android Active Users Aggregates
description: |-
  This table contains daily/weekly/monthly active users,
  new profiles, searches and ad_clicks for Klar Android,
  aggregated by submission_date, attribution, channel,
  country, city, device model, distribution_id, os details
  and activity segment.

  - dau is counting the users who reported a ping on the date and
  are qualified as active users.
  - daily_users counts all the users who reported a ping on the date.
  Only dau is exposed in the view telemetry.active_users_aggregates.

  The table is labeled as "change_controlled", which implies
  that changes require the approval of at least one owner.

  Proposal:
  https://docs.google.com/document/d/1qvWO49Lr_Z_WErh3I3058A3B1YuiuURx19K3aTdmejM/edit?usp=sharing
owners:
- lvargas@mozilla.com
- mozilla/kpi_table_reviewers
labels:
  incremental: true
  change_controlled: true
  dag: bqetl_analytics_aggregations
  owner1: lvargas
scheduling:
  dag_name: bqetl_analytics_aggregations
  task_name: klar_android_active_users_aggregates
  date_partition_offset: -1
bigquery:
  time_partitioning:
    type: day
    field: submission_date
    require_partition_filter: true
    expiration_days: null
  range_partitioning: null
  clustering:
    fields:
    - country
    - app_name
    - attribution_medium
    - channel
workgroup_access:
- role: roles/bigquery.dataViewer
  members:
  - workgroup:mozilla-confidential
references:
  checks.sql:
  - ..
  - moz-fx-data-shared-prod.org_mozilla_klar_live.baseline_v1
  query.sql:
  - moz-fx-data-shared-prod.klar_android.active_users
  - moz-fx-data-shared-prod.klar_android.metrics_clients_last_seen
