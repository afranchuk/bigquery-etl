friendly_name: Clients First Seen
description: |-
  Picks out just the first observations per client.
  - Each attribute is retrieved from the ping that reports it
  first: Main, New profile or First Shutdown ping, and only
  updated from pings reported on the first-seen date.
  The only exceptions are the second_seen_date and the metadata
  reported pings which are updated after the first_seen_date.

  This table should be accessed through the user-facing view
  `telemetry.clients_first_seen`.

  To initialize the table:
  - Run bqetl query initialize <path>/clients_first_seen_v2/query.sql
  - The table must not exist as data is inserted per sample_id.
  - The initialize command creates it.
owners:
- lvargas@mozilla.com
labels:
  application: firefox
  incremental: true
  schedule: daily
  depends_on_past: true
  owner1: lvargas
scheduling:
  dag_name: bqetl_analytics_tables
  task_name: clients_first_seen_v2
  depends_on_past: true
  date_partition_parameter: null
  parameters:
  - submission_date:DATE:{{ds}}
bigquery:
  time_partitioning:
    type: day
    field: first_seen_date
    require_partition_filter: false
    expiration_days: null
  clustering:
    fields:
    - normalized_channel
    - sample_id
    - country
    - normalized_os
references: {}
