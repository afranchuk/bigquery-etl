friendly_name: Newtab Desktop Daily Engagement By Tile Id & Position
description: |-
  Daily Firefox New Tab engagement on desktop by tile ID & position, across all territories and release channels
  This table is a temporary solution for supporting AdOps reporting. This table should eventually be merged with the consolidated ad metrics table(s)
owners:
- cbeck@mozilla.com
labels:
  incremental: true
  owner1: cbeck
  dag: bqetl_newtab_engagement_hourly
scheduling:
  dag_name: bqetl_newtab_engagement_hourly
  date_partition_parameter: null
  destination_table: newtab_desktop_daily_engagement_by_tile_id_position_v1${{ (execution_date
    - macros.timedelta(hours=1)).strftime("%Y%m%d") }}
  parameters:
  - submission_date:DATE:{{ (execution_date - macros.timedelta(hours=1)).strftime('%Y-%m-%d')
    }}
  query_file_path: sql/moz-fx-data-shared-prod/ads_derived/newtab_desktop_daily_engagement_by_tile_id_position/query.sql
bigquery:
  time_partitioning:
    type: day
    field: submission_date
    require_partition_filter: true
    expiration_days: null
  range_partitioning: null
  clustering: null
workgroup_access:
- role: roles/bigquery.dataViewer
  members:
  - workgroup:mozilla-confidential
references:
  query.sql:
  - moz-fx-data-shared-prod.activity_stream_live.impression_stats_v1
  - moz-fx-data-shared-prod.firefox_desktop_live.newtab_v1
