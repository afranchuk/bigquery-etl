friendly_name: FxA Server Events (prod)
description: |
  FxA server events extracted from accounts server stdout logs.
  This new table is the direct result of FxA migration from AWS to GCP
  (see: OPST-296 for more context).
  Effective 2023-09-07 rebalancing of traffic began (AWS to GCP) and this table contains partial
  event data for auth and content fxa servers. Once the migrations is complete all events for the following
  fxa servers will land in this table:

  - auth    (previous table: `fxa_auth_events_v1`)
  - content (previous table: `fxa_content_events_v1`)

  !!! Thereafter, those (previous) tables will no longer contain new event data.

  Payment server events will continue landing inside: `fxa_stdout_events_v1`
owners:
- kik@mozilla.com
labels:
  application: fxa
  incremental: true
  schedule: daily
  owner1: kik
  dag: bqetl_fxa_events
scheduling:
  dag_name: bqetl_fxa_events
  start_date: '2023-09-07'
  arguments:
  - --schema_update_option=ALLOW_FIELD_ADDITION
bigquery:
  time_partitioning:
    type: day
    field: timestamp
    require_partition_filter: true
    expiration_days: null
  clustering:
    fields:
    - fxa_server
references: {}
