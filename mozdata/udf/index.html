
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="Mozilla BigQuery ETL">
      
      
        <meta name="author" content="Mozilla Data Platform Team">
      
      
      <link rel="icon" href="../../favicon.png">
      <meta name="generator" content="mkdocs-1.4.2, mkdocs-material-8.5.7">
    
    
      
        <title>User-Defined Functions - BigQuery ETL</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.20d9efc8.min.css">
      
        
        <link rel="stylesheet" href="../../assets/stylesheets/palette.cbb835fc.min.css">
        
          
          
          <meta name="theme-color" content="#009485">
        
      
      

    
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
    <script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="" data-md-color-primary="teal" data-md-color-accent="">
  
    
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#active_n_weeks_ago" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../.." title="BigQuery ETL" class="md-header__button md-logo" aria-label="BigQuery ETL" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            BigQuery ETL
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              User-Defined Functions
            
          </span>
        </div>
      </div>
    </div>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        <a href="https://github.com/mozilla/bigquery-etl/" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    mozilla/bigquery-etl
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
            
<nav class="md-tabs" aria-label="Tabs" data-md-component="tabs">
  <div class="md-tabs__inner md-grid">
    <ul class="md-tabs__list">
      
        
  
  


  <li class="md-tabs__item">
    <a href="../.." class="md-tabs__link">
      Home
    </a>
  </li>

      
        
  
  
    
  


  
  
  
    

  
  
  
    <li class="md-tabs__item">
      <a href="../introduction/" class="md-tabs__link md-tabs__link--active">
        Datasets
      </a>
    </li>
  

  

      
        
  
  


  
  
  
    

  
  
  
    <li class="md-tabs__item">
      <a href="../../mozfun/about/" class="md-tabs__link">
        UDFs
      </a>
    </li>
  

  

      
        
  
  


  
  
  
    <li class="md-tabs__item">
      <a href="../../cookbooks/common_workflows/" class="md-tabs__link">
        Cookbooks
      </a>
    </li>
  

      
        
  
  


  
  
  
    <li class="md-tabs__item">
      <a href="../../bqetl/" class="md-tabs__link">
        Reference
      </a>
    </li>
  

      
    </ul>
  </div>
</nav>
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

  


<nav class="md-nav md-nav--primary md-nav--lifted" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="BigQuery ETL" class="md-nav__button md-logo" aria-label="BigQuery ETL" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg>

    </a>
    BigQuery ETL
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/mozilla/bigquery-etl/" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    mozilla/bigquery-etl
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../.." class="md-nav__link">
        Home
      </a>
    </li>
  

    
      
      
      

  
  
    
  
  
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_2" type="checkbox" id="__nav_2" checked>
      
      
      
      
        <label class="md-nav__link" for="__nav_2">
          Datasets
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Datasets" data-md-level="1">
        <label class="md-nav__title" for="__nav_2">
          <span class="md-nav__icon md-icon"></span>
          Datasets
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
    
  
  
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_2_1" type="checkbox" id="__nav_2_1" checked>
      
      
      
      
        <label class="md-nav__link" for="__nav_2_1">
          Mozdata
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Mozdata" data-md-level="2">
        <label class="md-nav__title" for="__nav_2_1">
          <span class="md-nav__icon md-icon"></span>
          Mozdata
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../introduction/" class="md-nav__link">
        Introduction
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../activity_stream/" class="md-nav__link">
        Activity Stream
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../amo_dev/" class="md-nav__link">
        AMO Stats Dev
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../amo_prod/" class="md-nav__link">
        AMO Stats Prod
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../analysis/" class="md-nav__link">
        Analysis
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../bedrock/" class="md-nav__link">
        bedrock
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../bergamot/" class="md-nav__link">
        Bergamot
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../blpadi/" class="md-nav__link">
        Blocklist ADI
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../burnham/" class="md-nav__link">
        burnham
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../contextual_services/" class="md-nav__link">
        contextual-services
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../coverage/" class="md-nav__link">
        coverage
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../default_browser_agent/" class="md-nav__link">
        default-browser-agent
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../edge_validator/" class="md-nav__link">
        edge-validator
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../eng_workflow/" class="md-nav__link">
        eng-workflow
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../fenix/" class="md-nav__link">
        Fenix
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../firefox_accounts/" class="md-nav__link">
        Firefox Accounts
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../firefox_desktop/" class="md-nav__link">
        firefox-desktop
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../firefox_desktop_background_tasks/" class="md-nav__link">
        firefox-desktop-background-tasks
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../firefox_desktop_background_update/" class="md-nav__link">
        firefox-desktop-background-update
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../firefox_echo_show/" class="md-nav__link">
        Firefox Echo Show
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../firefox_fire_tv/" class="md-nav__link">
        Firefox Fire Tv
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../firefox_installer/" class="md-nav__link">
        firefox-installer
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../firefox_ios/" class="md-nav__link">
        Firefox iOS
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../firefox_launcher_process/" class="md-nav__link">
        firefox-launcher-process
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../firefox_reality/" class="md-nav__link">
        Firefox Reality
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../firefox_reality_pc/" class="md-nav__link">
        Firefox Reality Pc
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../firefox_translations/" class="md-nav__link">
        firefox-translations
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../fivetran_costs/" class="md-nav__link">
        Fivetran Costs
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../focus_android/" class="md-nav__link">
        Focus Android
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../focus_ios/" class="md-nav__link">
        Focus Ios
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../glean_dictionary/" class="md-nav__link">
        glean-dictionary
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../google_ads/" class="md-nav__link">
        Google_ads
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../hubs/" class="md-nav__link">
        Hubs
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../internet_outages/" class="md-nav__link">
        Internet Outages
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../klar_android/" class="md-nav__link">
        Klar Android
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../klar_ios/" class="md-nav__link">
        Klar Ios
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../lockwise_android/" class="md-nav__link">
        Lockwise Android
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../lockwise_ios/" class="md-nav__link">
        Lockwise Ios
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../mach/" class="md-nav__link">
        Mach
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../mdn_yari/" class="md-nav__link">
        mdn-yari
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../messaging_system/" class="md-nav__link">
        messaging-system
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../mlhackweek_search/" class="md-nav__link">
        mlhackweek-search
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../mobile/" class="md-nav__link">
        mobile
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../monitoring/" class="md-nav__link">
        Monitoring
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../mozdata/" class="md-nav__link">
        mozdata
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../mozilla_lockbox/" class="md-nav__link">
        mozilla-lockbox
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../mozilla_mach/" class="md-nav__link">
        mozilla-mach
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../mozilla_vpn/" class="md-nav__link">
        Mozilla VPN
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../mozillavpn/" class="md-nav__link">
        mozillavpn
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../mozphab/" class="md-nav__link">
        mozphab
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../mozregression/" class="md-nav__link">
        Mozregression
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../mozza/" class="md-nav__link">
        mozza
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../operational_monitoring/" class="md-nav__link">
        Operational Monitoring
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../org_mozilla_bergamot/" class="md-nav__link">
        org-mozilla-bergamot
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../org_mozilla_connect_firefox/" class="md-nav__link">
        org-mozilla-connect-firefox
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../org_mozilla_fenix/" class="md-nav__link">
        org-mozilla-fenix
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../org_mozilla_fenix_nightly/" class="md-nav__link">
        org-mozilla-fenix-nightly
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../org_mozilla_fennec_aurora/" class="md-nav__link">
        org-mozilla-fennec-aurora
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../org_mozilla_firefox/" class="md-nav__link">
        org-mozilla-firefox
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../org_mozilla_firefox_beta/" class="md-nav__link">
        org-mozilla-firefox-beta
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../org_mozilla_firefox_vpn/" class="md-nav__link">
        org-mozilla-firefox-vpn
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../org_mozilla_firefoxreality/" class="md-nav__link">
        org-mozilla-firefoxreality
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../org_mozilla_focus/" class="md-nav__link">
        org-mozilla-focus
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../org_mozilla_focus_beta/" class="md-nav__link">
        org-mozilla-focus-beta
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../org_mozilla_focus_nightly/" class="md-nav__link">
        org-mozilla-focus-nightly
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../org_mozilla_ios_fennec/" class="md-nav__link">
        org-mozilla-ios-fennec
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../org_mozilla_ios_firefox/" class="md-nav__link">
        org-mozilla-ios-firefox
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../org_mozilla_ios_firefoxbeta/" class="md-nav__link">
        org-mozilla-ios-firefoxbeta
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../org_mozilla_ios_focus/" class="md-nav__link">
        org-mozilla-ios-focus
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../org_mozilla_ios_klar/" class="md-nav__link">
        org-mozilla-ios-klar
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../org_mozilla_ios_lockbox/" class="md-nav__link">
        org-mozilla-ios-lockbox
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../org_mozilla_klar/" class="md-nav__link">
        org-mozilla-klar
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../org_mozilla_mozregression/" class="md-nav__link">
        org-mozilla-mozregression
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../org_mozilla_reference_browser/" class="md-nav__link">
        org-mozilla-reference-browser
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../org_mozilla_tv_firefox/" class="md-nav__link">
        org-mozilla-tv-firefox
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../org_mozilla_vrbrowser/" class="md-nav__link">
        org-mozilla-vrbrowser
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../pine/" class="md-nav__link">
        pine
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../pocket/" class="md-nav__link">
        pocket
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../reference_browser/" class="md-nav__link">
        Reference Browser
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../regrets_reporter/" class="md-nav__link">
        regrets-reporter
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../regrets_reporter_ucs/" class="md-nav__link">
        regrets-reporter-ucs
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../relay/" class="md-nav__link">
        Firefox Relay
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../search/" class="md-nav__link">
        Search
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../search_terms/" class="md-nav__link">
        Search Terms
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../static/" class="md-nav__link">
        Static Data
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../stripe/" class="md-nav__link">
        Stripe
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../subscription_platform/" class="md-nav__link">
        Subscription Platform
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../telemetry/" class="md-nav__link">
        Telemetry
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../treeherder/" class="md-nav__link">
        treeherder
      </a>
    </li>
  

            
          
            
              
  
  
    
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" data-md-toggle="toc" type="checkbox" id="__toc">
      
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          User-Defined Functions
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        User-Defined Functions
      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#active_n_weeks_ago" class="md-nav__link">
    active_n_weeks_ago
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#active_values_from_days_seen_map" class="md-nav__link">
    active_values_from_days_seen_map
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#add_monthly_engine_searches" class="md-nav__link">
    add_monthly_engine_searches
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#add_monthly_searches" class="md-nav__link">
    add_monthly_searches
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#add_searches_by_index" class="md-nav__link">
    add_searches_by_index
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aggregate_active_addons" class="md-nav__link">
    aggregate_active_addons
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aggregate_map_first" class="md-nav__link">
    aggregate_map_first
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aggregate_search_counts" class="md-nav__link">
    aggregate_search_counts
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aggregate_search_map" class="md-nav__link">
    aggregate_search_map
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#array_11_zeroes_then" class="md-nav__link">
    array_11_zeroes_then
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#array_drop_first_and_append" class="md-nav__link">
    array_drop_first_and_append
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#array_of_12_zeroes" class="md-nav__link">
    array_of_12_zeroes
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#array_slice" class="md-nav__link">
    array_slice
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#bitcount_lowest_7" class="md-nav__link">
    bitcount_lowest_7
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#bitmask_365" class="md-nav__link">
    bitmask_365
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#bitmask_lowest_28" class="md-nav__link">
    bitmask_lowest_28
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#bitmask_lowest_7" class="md-nav__link">
    bitmask_lowest_7
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#bitmask_range" class="md-nav__link">
    bitmask_range
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#bits28_active_in_range" class="md-nav__link">
    bits28_active_in_range
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#bits28_days_since_seen" class="md-nav__link">
    bits28_days_since_seen
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#bits28_from_string" class="md-nav__link">
    bits28_from_string
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#bits28_range" class="md-nav__link">
    bits28_range
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#bits28_retention" class="md-nav__link">
    bits28_retention
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#bits28_to_dates" class="md-nav__link">
    bits28_to_dates
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#bits28_to_string" class="md-nav__link">
    bits28_to_string
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#bits_from_offsets" class="md-nav__link">
    bits_from_offsets
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#bits_to_active_n_weeks_ago" class="md-nav__link">
    bits_to_active_n_weeks_ago
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#bits_to_days_seen" class="md-nav__link">
    bits_to_days_seen
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#bits_to_days_since_first_seen" class="md-nav__link">
    bits_to_days_since_first_seen
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#bits_to_days_since_seen" class="md-nav__link">
    bits_to_days_since_seen
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#bool_to_365_bits" class="md-nav__link">
    bool_to_365_bits
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#boolean_histogram_to_boolean" class="md-nav__link">
    boolean_histogram_to_boolean
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#coalesce_adjacent_days_28_bits" class="md-nav__link">
    coalesce_adjacent_days_28_bits
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#coalesce_adjacent_days_365_bits" class="md-nav__link">
    coalesce_adjacent_days_365_bits
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#combine_adjacent_days_28_bits" class="md-nav__link">
    combine_adjacent_days_28_bits
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#combine_adjacent_days_365_bits" class="md-nav__link">
    combine_adjacent_days_365_bits
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#combine_days_seen_maps" class="md-nav__link">
    combine_days_seen_maps
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#combine_experiment_days" class="md-nav__link">
    combine_experiment_days
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#country_code_to_flag" class="md-nav__link">
    country_code_to_flag
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#days_seen_bytes_to_rfm" class="md-nav__link">
    days_seen_bytes_to_rfm
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#days_since_created_profile_as_28_bits" class="md-nav__link">
    days_since_created_profile_as_28_bits
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#deanonymize_event" class="md-nav__link">
    deanonymize_event
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#decode_int64" class="md-nav__link">
    decode_int64
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#dedupe_array" class="md-nav__link">
    dedupe_array
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#event_code_points_to_string" class="md-nav__link">
    event_code_points_to_string
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#experiment_search_metric_to_array" class="md-nav__link">
    experiment_search_metric_to_array
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#extract_count_histogram_value" class="md-nav__link">
    extract_count_histogram_value
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#extract_document_type" class="md-nav__link">
    extract_document_type
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#extract_document_version" class="md-nav__link">
    extract_document_version
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#extract_histogram_sum" class="md-nav__link">
    extract_histogram_sum
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#extract_schema_validation_path" class="md-nav__link">
    extract_schema_validation_path
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#fenix_build_to_datetime" class="md-nav__link">
    fenix_build_to_datetime
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#ga_is_mozilla_browser" class="md-nav__link">
    ga_is_mozilla_browser
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#geo_struct" class="md-nav__link">
    geo_struct
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#get_key" class="md-nav__link">
    get_key
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#get_key_with_null" class="md-nav__link">
    get_key_with_null
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#glean_timespan_nanos" class="md-nav__link">
    glean_timespan_nanos
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#glean_timespan_seconds" class="md-nav__link">
    glean_timespan_seconds
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#gzip_length_footer" class="md-nav__link">
    gzip_length_footer
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#histogram_max_key_with_nonzero_value" class="md-nav__link">
    histogram_max_key_with_nonzero_value
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#histogram_merge" class="md-nav__link">
    histogram_merge
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#histogram_normalize" class="md-nav__link">
    histogram_normalize
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#histogram_percentiles" class="md-nav__link">
    histogram_percentiles
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#histogram_to_mean" class="md-nav__link">
    histogram_to_mean
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#histogram_to_threshold_count" class="md-nav__link">
    histogram_to_threshold_count
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#hmac_sha256" class="md-nav__link">
    hmac_sha256
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#int_to_365_bits" class="md-nav__link">
    int_to_365_bits
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#int_to_hex_string" class="md-nav__link">
    int_to_hex_string
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#json_extract_histogram" class="md-nav__link">
    json_extract_histogram
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#json_extract_int_map" class="md-nav__link">
    json_extract_int_map
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#json_mode_last" class="md-nav__link">
    json_mode_last
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#keyed_histogram_get_sum" class="md-nav__link">
    keyed_histogram_get_sum
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#kv_array_append_to_json_string" class="md-nav__link">
    kv_array_append_to_json_string
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#kv_array_to_json_string" class="md-nav__link">
    kv_array_to_json_string
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#main_summary_scalars" class="md-nav__link">
    main_summary_scalars
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#map_bing_revenue_country_to_country_code" class="md-nav__link">
    map_bing_revenue_country_to_country_code
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#map_mode_last" class="md-nav__link">
    map_mode_last
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#map_revenue_country" class="md-nav__link">
    map_revenue_country
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#map_sum" class="md-nav__link">
    map_sum
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#merge_scalar_user_data" class="md-nav__link">
    merge_scalar_user_data
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#mod_uint128" class="md-nav__link">
    mod_uint128
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#mode_last" class="md-nav__link">
    mode_last
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#mode_last_retain_nulls" class="md-nav__link">
    mode_last_retain_nulls
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#new_monthly_engine_searches_struct" class="md-nav__link">
    new_monthly_engine_searches_struct
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#normalize_fenix_metrics" class="md-nav__link">
    normalize_fenix_metrics
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#normalize_glean_baseline_client_info" class="md-nav__link">
    normalize_glean_baseline_client_info
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#normalize_glean_ping_info" class="md-nav__link">
    normalize_glean_ping_info
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#normalize_main_payload" class="md-nav__link">
    normalize_main_payload
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#normalize_metadata" class="md-nav__link">
    normalize_metadata
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#normalize_monthly_searches" class="md-nav__link">
    normalize_monthly_searches
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#normalize_os" class="md-nav__link">
    normalize_os
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#normalize_search_engine" class="md-nav__link">
    normalize_search_engine
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#null_if_empty_list" class="md-nav__link">
    null_if_empty_list
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#one_as_365_bits" class="md-nav__link">
    one_as_365_bits
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#pack_event_properties" class="md-nav__link">
    pack_event_properties
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#parquet_array_sum" class="md-nav__link">
    parquet_array_sum
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#parse_desktop_telemetry_uri" class="md-nav__link">
    parse_desktop_telemetry_uri
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#parse_iso8601_date" class="md-nav__link">
    parse_iso8601_date
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#pos_of_leading_set_bit" class="md-nav__link">
    pos_of_leading_set_bit
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#pos_of_trailing_set_bit" class="md-nav__link">
    pos_of_trailing_set_bit
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#product_info_with_baseline" class="md-nav__link">
    product_info_with_baseline
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#quantile_search_metric_contribution" class="md-nav__link">
    quantile_search_metric_contribution
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#round_timestamp_to_minute" class="md-nav__link">
    round_timestamp_to_minute
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#safe_crc32_uuid" class="md-nav__link">
    safe_crc32_uuid
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#safe_sample_id" class="md-nav__link">
    safe_sample_id
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#search_counts_map_sum" class="md-nav__link">
    search_counts_map_sum
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#shift_28_bits_one_day" class="md-nav__link">
    shift_28_bits_one_day
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#shift_365_bits_one_day" class="md-nav__link">
    shift_365_bits_one_day
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#shift_one_day" class="md-nav__link">
    shift_one_day
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#smoot_usage_from_28_bits" class="md-nav__link">
    smoot_usage_from_28_bits
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#vector_add" class="md-nav__link">
    vector_add
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#zero_as_365_bits" class="md-nav__link">
    zero_as_365_bits
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#zeroed_array" class="md-nav__link">
    zeroed_array
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../udf_js/" class="md-nav__link">
        User-Defined Functions (Javascript)
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../udf_js_lib/" class="md-nav__link">
        udf_js_lib
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../udf_legacy/" class="md-nav__link">
        User-Defined Functions (Legacy)
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../viu_politica/" class="md-nav__link">
        viu-politica
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../webpagetest/" class="md-nav__link">
        webpagetest
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_3" type="checkbox" id="__nav_3" >
      
      
      
      
        <label class="md-nav__link" for="__nav_3">
          UDFs
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="UDFs" data-md-level="1">
        <label class="md-nav__title" for="__nav_3">
          <span class="md-nav__icon md-icon"></span>
          UDFs
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_3_1" type="checkbox" id="__nav_3_1" >
      
      
      
      
        <label class="md-nav__link" for="__nav_3_1">
          Mozfun
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Mozfun" data-md-level="2">
        <label class="md-nav__title" for="__nav_3_1">
          <span class="md-nav__icon md-icon"></span>
          Mozfun
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../mozfun/about/" class="md-nav__link">
        mozfun
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../mozfun/bits28/" class="md-nav__link">
        bits28
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../mozfun/bytes/" class="md-nav__link">
        bytes
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../mozfun/datetime_util/" class="md-nav__link">
        datetime_util.fxa_parse_date
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../mozfun/event_analysis/" class="md-nav__link">
        event_analysis
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../mozfun/glam/" class="md-nav__link">
        Glam
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../mozfun/glean/" class="md-nav__link">
        glean
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../mozfun/hist/" class="md-nav__link">
        hist
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../mozfun/iap/" class="md-nav__link">
        iap
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../mozfun/json/" class="md-nav__link">
        json
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../mozfun/map/" class="md-nav__link">
        map
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../mozfun/norm/" class="md-nav__link">
        norm
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../mozfun/stats/" class="md-nav__link">
        stats
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../mozfun/vpn/" class="md-nav__link">
        vpn
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_4" type="checkbox" id="__nav_4" >
      
      
      
      
        <label class="md-nav__link" for="__nav_4">
          Cookbooks
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Cookbooks" data-md-level="1">
        <label class="md-nav__title" for="__nav_4">
          <span class="md-nav__icon md-icon"></span>
          Cookbooks
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../cookbooks/common_workflows/" class="md-nav__link">
        Common workflows
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../cookbooks/creating_a_derived_dataset/" class="md-nav__link">
        Creating a derived dataset
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../cookbooks/testing/" class="md-nav__link">
        Testing
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_5" type="checkbox" id="__nav_5" >
      
      
      
      
        <label class="md-nav__link" for="__nav_5">
          Reference
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Reference" data-md-level="1">
        <label class="md-nav__title" for="__nav_5">
          <span class="md-nav__icon md-icon"></span>
          Reference
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../bqetl/" class="md-nav__link">
        bqetl CLI
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../reference/recommended_practices/" class="md-nav__link">
        Recommended practices
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../reference/incremental/" class="md-nav__link">
        Incremental queries
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../reference/scheduling/" class="md-nav__link">
        Scheduling
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../reference/public_data/" class="md-nav__link">
        Public data
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../reference/airflow_tags/" class="md-nav__link">
        Airflow Tags
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#active_n_weeks_ago" class="md-nav__link">
    active_n_weeks_ago
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#active_values_from_days_seen_map" class="md-nav__link">
    active_values_from_days_seen_map
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#add_monthly_engine_searches" class="md-nav__link">
    add_monthly_engine_searches
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#add_monthly_searches" class="md-nav__link">
    add_monthly_searches
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#add_searches_by_index" class="md-nav__link">
    add_searches_by_index
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aggregate_active_addons" class="md-nav__link">
    aggregate_active_addons
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aggregate_map_first" class="md-nav__link">
    aggregate_map_first
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aggregate_search_counts" class="md-nav__link">
    aggregate_search_counts
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aggregate_search_map" class="md-nav__link">
    aggregate_search_map
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#array_11_zeroes_then" class="md-nav__link">
    array_11_zeroes_then
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#array_drop_first_and_append" class="md-nav__link">
    array_drop_first_and_append
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#array_of_12_zeroes" class="md-nav__link">
    array_of_12_zeroes
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#array_slice" class="md-nav__link">
    array_slice
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#bitcount_lowest_7" class="md-nav__link">
    bitcount_lowest_7
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#bitmask_365" class="md-nav__link">
    bitmask_365
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#bitmask_lowest_28" class="md-nav__link">
    bitmask_lowest_28
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#bitmask_lowest_7" class="md-nav__link">
    bitmask_lowest_7
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#bitmask_range" class="md-nav__link">
    bitmask_range
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#bits28_active_in_range" class="md-nav__link">
    bits28_active_in_range
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#bits28_days_since_seen" class="md-nav__link">
    bits28_days_since_seen
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#bits28_from_string" class="md-nav__link">
    bits28_from_string
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#bits28_range" class="md-nav__link">
    bits28_range
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#bits28_retention" class="md-nav__link">
    bits28_retention
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#bits28_to_dates" class="md-nav__link">
    bits28_to_dates
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#bits28_to_string" class="md-nav__link">
    bits28_to_string
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#bits_from_offsets" class="md-nav__link">
    bits_from_offsets
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#bits_to_active_n_weeks_ago" class="md-nav__link">
    bits_to_active_n_weeks_ago
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#bits_to_days_seen" class="md-nav__link">
    bits_to_days_seen
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#bits_to_days_since_first_seen" class="md-nav__link">
    bits_to_days_since_first_seen
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#bits_to_days_since_seen" class="md-nav__link">
    bits_to_days_since_seen
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#bool_to_365_bits" class="md-nav__link">
    bool_to_365_bits
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#boolean_histogram_to_boolean" class="md-nav__link">
    boolean_histogram_to_boolean
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#coalesce_adjacent_days_28_bits" class="md-nav__link">
    coalesce_adjacent_days_28_bits
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#coalesce_adjacent_days_365_bits" class="md-nav__link">
    coalesce_adjacent_days_365_bits
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#combine_adjacent_days_28_bits" class="md-nav__link">
    combine_adjacent_days_28_bits
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#combine_adjacent_days_365_bits" class="md-nav__link">
    combine_adjacent_days_365_bits
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#combine_days_seen_maps" class="md-nav__link">
    combine_days_seen_maps
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#combine_experiment_days" class="md-nav__link">
    combine_experiment_days
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#country_code_to_flag" class="md-nav__link">
    country_code_to_flag
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#days_seen_bytes_to_rfm" class="md-nav__link">
    days_seen_bytes_to_rfm
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#days_since_created_profile_as_28_bits" class="md-nav__link">
    days_since_created_profile_as_28_bits
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#deanonymize_event" class="md-nav__link">
    deanonymize_event
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#decode_int64" class="md-nav__link">
    decode_int64
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#dedupe_array" class="md-nav__link">
    dedupe_array
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#event_code_points_to_string" class="md-nav__link">
    event_code_points_to_string
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#experiment_search_metric_to_array" class="md-nav__link">
    experiment_search_metric_to_array
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#extract_count_histogram_value" class="md-nav__link">
    extract_count_histogram_value
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#extract_document_type" class="md-nav__link">
    extract_document_type
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#extract_document_version" class="md-nav__link">
    extract_document_version
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#extract_histogram_sum" class="md-nav__link">
    extract_histogram_sum
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#extract_schema_validation_path" class="md-nav__link">
    extract_schema_validation_path
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#fenix_build_to_datetime" class="md-nav__link">
    fenix_build_to_datetime
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#ga_is_mozilla_browser" class="md-nav__link">
    ga_is_mozilla_browser
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#geo_struct" class="md-nav__link">
    geo_struct
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#get_key" class="md-nav__link">
    get_key
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#get_key_with_null" class="md-nav__link">
    get_key_with_null
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#glean_timespan_nanos" class="md-nav__link">
    glean_timespan_nanos
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#glean_timespan_seconds" class="md-nav__link">
    glean_timespan_seconds
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#gzip_length_footer" class="md-nav__link">
    gzip_length_footer
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#histogram_max_key_with_nonzero_value" class="md-nav__link">
    histogram_max_key_with_nonzero_value
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#histogram_merge" class="md-nav__link">
    histogram_merge
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#histogram_normalize" class="md-nav__link">
    histogram_normalize
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#histogram_percentiles" class="md-nav__link">
    histogram_percentiles
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#histogram_to_mean" class="md-nav__link">
    histogram_to_mean
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#histogram_to_threshold_count" class="md-nav__link">
    histogram_to_threshold_count
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#hmac_sha256" class="md-nav__link">
    hmac_sha256
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#int_to_365_bits" class="md-nav__link">
    int_to_365_bits
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#int_to_hex_string" class="md-nav__link">
    int_to_hex_string
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#json_extract_histogram" class="md-nav__link">
    json_extract_histogram
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#json_extract_int_map" class="md-nav__link">
    json_extract_int_map
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#json_mode_last" class="md-nav__link">
    json_mode_last
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#keyed_histogram_get_sum" class="md-nav__link">
    keyed_histogram_get_sum
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#kv_array_append_to_json_string" class="md-nav__link">
    kv_array_append_to_json_string
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#kv_array_to_json_string" class="md-nav__link">
    kv_array_to_json_string
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#main_summary_scalars" class="md-nav__link">
    main_summary_scalars
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#map_bing_revenue_country_to_country_code" class="md-nav__link">
    map_bing_revenue_country_to_country_code
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#map_mode_last" class="md-nav__link">
    map_mode_last
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#map_revenue_country" class="md-nav__link">
    map_revenue_country
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#map_sum" class="md-nav__link">
    map_sum
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#merge_scalar_user_data" class="md-nav__link">
    merge_scalar_user_data
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#mod_uint128" class="md-nav__link">
    mod_uint128
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#mode_last" class="md-nav__link">
    mode_last
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#mode_last_retain_nulls" class="md-nav__link">
    mode_last_retain_nulls
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#new_monthly_engine_searches_struct" class="md-nav__link">
    new_monthly_engine_searches_struct
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#normalize_fenix_metrics" class="md-nav__link">
    normalize_fenix_metrics
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#normalize_glean_baseline_client_info" class="md-nav__link">
    normalize_glean_baseline_client_info
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#normalize_glean_ping_info" class="md-nav__link">
    normalize_glean_ping_info
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#normalize_main_payload" class="md-nav__link">
    normalize_main_payload
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#normalize_metadata" class="md-nav__link">
    normalize_metadata
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#normalize_monthly_searches" class="md-nav__link">
    normalize_monthly_searches
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#normalize_os" class="md-nav__link">
    normalize_os
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#normalize_search_engine" class="md-nav__link">
    normalize_search_engine
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#null_if_empty_list" class="md-nav__link">
    null_if_empty_list
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#one_as_365_bits" class="md-nav__link">
    one_as_365_bits
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#pack_event_properties" class="md-nav__link">
    pack_event_properties
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#parquet_array_sum" class="md-nav__link">
    parquet_array_sum
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#parse_desktop_telemetry_uri" class="md-nav__link">
    parse_desktop_telemetry_uri
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#parse_iso8601_date" class="md-nav__link">
    parse_iso8601_date
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#pos_of_leading_set_bit" class="md-nav__link">
    pos_of_leading_set_bit
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#pos_of_trailing_set_bit" class="md-nav__link">
    pos_of_trailing_set_bit
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#product_info_with_baseline" class="md-nav__link">
    product_info_with_baseline
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#quantile_search_metric_contribution" class="md-nav__link">
    quantile_search_metric_contribution
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#round_timestamp_to_minute" class="md-nav__link">
    round_timestamp_to_minute
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#safe_crc32_uuid" class="md-nav__link">
    safe_crc32_uuid
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#safe_sample_id" class="md-nav__link">
    safe_sample_id
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#search_counts_map_sum" class="md-nav__link">
    search_counts_map_sum
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#shift_28_bits_one_day" class="md-nav__link">
    shift_28_bits_one_day
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#shift_365_bits_one_day" class="md-nav__link">
    shift_365_bits_one_day
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#shift_one_day" class="md-nav__link">
    shift_one_day
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#smoot_usage_from_28_bits" class="md-nav__link">
    smoot_usage_from_28_bits
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#vector_add" class="md-nav__link">
    vector_add
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#zero_as_365_bits" class="md-nav__link">
    zero_as_365_bits
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#zeroed_array" class="md-nav__link">
    zeroed_array
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  


  <h1>User-Defined Functions</h1>

<p>Persistent user-defined functions</p>
<p><a href="https://github.com/mozilla/bigquery-etl/blob/generated-sql/sql/moz-fx-data-shared-prod/udf">Source Directory</a></p>
<h2 id="active_n_weeks_ago"><a href="#active_n_weeks_ago">active_n_weeks_ago</a></h2>
<p><strong>Active N Weeks Ago</strong></p>
<p><code>udf.active_n_weeks_ago</code></p>
<p><a href="https://github.com/mozilla/bigquery-etl/blob/generated-sql/sql/moz-fx-data-shared-prod/udf/active_n_weeks_ago">Source Directory</a>  | <a href="https://github.com/mozilla/bigquery-etl/blob/generated-sql/sql/moz-fx-data-shared-prod/udf/active_n_weeks_ago/metadata.yaml">Metadata File</a> </p>
<hr />
<h2 id="active_values_from_days_seen_map"><a href="#active_values_from_days_seen_map">active_values_from_days_seen_map</a></h2>
<p><strong>Active Values From Days Seen Map</strong></p>
<p><code>udf.active_values_from_days_seen_map</code></p>
<p>Given a map of representing activity for STRING <code>key</code>s, this function returns an array of which <code>key</code>s were active for the time period in question. start_offset should be at most 0. n_bits should be at most the remaining bits.</p>
<p><a href="https://github.com/mozilla/bigquery-etl/blob/generated-sql/sql/moz-fx-data-shared-prod/udf/active_values_from_days_seen_map">Source Directory</a>  | <a href="https://github.com/mozilla/bigquery-etl/blob/generated-sql/sql/moz-fx-data-shared-prod/udf/active_values_from_days_seen_map/metadata.yaml">Metadata File</a> </p>
<hr />
<h2 id="add_monthly_engine_searches"><a href="#add_monthly_engine_searches">add_monthly_engine_searches</a></h2>
<p><strong>Add Monthly Engine Searches</strong></p>
<p><code>udf.add_monthly_engine_searches</code></p>
<p>This function specifically windows searches into calendar-month windows. This means groups are not necessarily directly comparable, since different months have different numbers of days.  On the first of each month, a new month is appended, and the first month is dropped.  If the date is not the first of the month, the new entry is added to the last element in the array.  For example, if we were adding 12 to [1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12]:  On the first of the month, the result would be [2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 12] On any other day of the month, the result would be [1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 24]  This happens for every aggregate (searches, ad clicks, etc.)</p>
<p><a href="https://github.com/mozilla/bigquery-etl/blob/generated-sql/sql/moz-fx-data-shared-prod/udf/add_monthly_engine_searches">Source Directory</a>  | <a href="https://github.com/mozilla/bigquery-etl/blob/generated-sql/sql/moz-fx-data-shared-prod/udf/add_monthly_engine_searches/metadata.yaml">Metadata File</a> </p>
<hr />
<h2 id="add_monthly_searches"><a href="#add_monthly_searches">add_monthly_searches</a></h2>
<p><strong>Add Monthly Searches</strong></p>
<p><code>udf.add_monthly_searches</code></p>
<p>Adds together two engine searches structs. Each engine searches struct has a MAP[engine -&gt; search_counts_struct]. We want to add add together the prev and curr's values for a certain engine.  This allows us to be flexible with the number of engines we're using.</p>
<p><a href="https://github.com/mozilla/bigquery-etl/blob/generated-sql/sql/moz-fx-data-shared-prod/udf/add_monthly_searches">Source Directory</a>  | <a href="https://github.com/mozilla/bigquery-etl/blob/generated-sql/sql/moz-fx-data-shared-prod/udf/add_monthly_searches/metadata.yaml">Metadata File</a> </p>
<hr />
<h2 id="add_searches_by_index"><a href="#add_searches_by_index">add_searches_by_index</a></h2>
<p><strong>Add Searches By Index</strong></p>
<p><code>udf.add_searches_by_index</code></p>
<p>Return sums of each search type grouped by the index. Results are ordered by index.</p>
<p><a href="https://github.com/mozilla/bigquery-etl/blob/generated-sql/sql/moz-fx-data-shared-prod/udf/add_searches_by_index">Source Directory</a>  | <a href="https://github.com/mozilla/bigquery-etl/blob/generated-sql/sql/moz-fx-data-shared-prod/udf/add_searches_by_index/metadata.yaml">Metadata File</a> </p>
<hr />
<h2 id="aggregate_active_addons"><a href="#aggregate_active_addons">aggregate_active_addons</a></h2>
<p><strong>Aggregate Active Addons</strong></p>
<p><code>udf.aggregate_active_addons</code></p>
<p>This function selects most frequently occuring value for each addon_id, using the latest value in the input among ties. The type for active_addons is ARRAY<STRUCT\<addon_id STRING, ...>>, i.e. the output of <code>SELECT ARRAY_CONCAT_AGG(active_addons) FROM telemetry.main_summary_v4</code>, and is left unspecified to allow changes to the fields of the STRUCT.</p>
<p><a href="https://github.com/mozilla/bigquery-etl/blob/generated-sql/sql/moz-fx-data-shared-prod/udf/aggregate_active_addons">Source Directory</a>  | <a href="https://github.com/mozilla/bigquery-etl/blob/generated-sql/sql/moz-fx-data-shared-prod/udf/aggregate_active_addons/metadata.yaml">Metadata File</a> </p>
<hr />
<h2 id="aggregate_map_first"><a href="#aggregate_map_first">aggregate_map_first</a></h2>
<p><strong>Aggregate Map First</strong></p>
<p><code>udf.aggregate_map_first</code></p>
<p>Returns an aggregated map with all the keys and the first corresponding value from the given maps</p>
<p><a href="https://github.com/mozilla/bigquery-etl/blob/generated-sql/sql/moz-fx-data-shared-prod/udf/aggregate_map_first">Source Directory</a>  | <a href="https://github.com/mozilla/bigquery-etl/blob/generated-sql/sql/moz-fx-data-shared-prod/udf/aggregate_map_first/metadata.yaml">Metadata File</a> </p>
<hr />
<h2 id="aggregate_search_counts"><a href="#aggregate_search_counts">aggregate_search_counts</a></h2>
<p><strong>Aggregate Search Counts</strong></p>
<p><code>udf.aggregate_search_counts</code></p>
<p><a href="https://github.com/mozilla/bigquery-etl/blob/generated-sql/sql/moz-fx-data-shared-prod/udf/aggregate_search_counts">Source Directory</a>  | <a href="https://github.com/mozilla/bigquery-etl/blob/generated-sql/sql/moz-fx-data-shared-prod/udf/aggregate_search_counts/metadata.yaml">Metadata File</a> </p>
<hr />
<h2 id="aggregate_search_map"><a href="#aggregate_search_map">aggregate_search_map</a></h2>
<p><strong>Aggregate Search Map</strong></p>
<p><code>udf.aggregate_search_map</code></p>
<p>Aggregates the total counts of the given search counters</p>
<p><a href="https://github.com/mozilla/bigquery-etl/blob/generated-sql/sql/moz-fx-data-shared-prod/udf/aggregate_search_map">Source Directory</a>  | <a href="https://github.com/mozilla/bigquery-etl/blob/generated-sql/sql/moz-fx-data-shared-prod/udf/aggregate_search_map/metadata.yaml">Metadata File</a> </p>
<hr />
<h2 id="array_11_zeroes_then"><a href="#array_11_zeroes_then">array_11_zeroes_then</a></h2>
<p><strong>Array 11 Zeroes Then</strong></p>
<p><code>udf.array_11_zeroes_then</code></p>
<p>An array of 11 zeroes, followed by a supplied value</p>
<p><a href="https://github.com/mozilla/bigquery-etl/blob/generated-sql/sql/moz-fx-data-shared-prod/udf/array_11_zeroes_then">Source Directory</a>  | <a href="https://github.com/mozilla/bigquery-etl/blob/generated-sql/sql/moz-fx-data-shared-prod/udf/array_11_zeroes_then/metadata.yaml">Metadata File</a> </p>
<hr />
<h2 id="array_drop_first_and_append"><a href="#array_drop_first_and_append">array_drop_first_and_append</a></h2>
<p><strong>Array Drop First And Append</strong></p>
<p><code>udf.array_drop_first_and_append</code></p>
<p>Drop the first element of an array, and append the given element.  Result is an array with the same length as the input.</p>
<p><a href="https://github.com/mozilla/bigquery-etl/blob/generated-sql/sql/moz-fx-data-shared-prod/udf/array_drop_first_and_append">Source Directory</a>  | <a href="https://github.com/mozilla/bigquery-etl/blob/generated-sql/sql/moz-fx-data-shared-prod/udf/array_drop_first_and_append/metadata.yaml">Metadata File</a> </p>
<hr />
<h2 id="array_of_12_zeroes"><a href="#array_of_12_zeroes">array_of_12_zeroes</a></h2>
<p><strong>Array Of 12 Zeroes</strong></p>
<p><code>udf.array_of_12_zeroes</code></p>
<p>An array of 12 zeroes</p>
<p><a href="https://github.com/mozilla/bigquery-etl/blob/generated-sql/sql/moz-fx-data-shared-prod/udf/array_of_12_zeroes">Source Directory</a>  | <a href="https://github.com/mozilla/bigquery-etl/blob/generated-sql/sql/moz-fx-data-shared-prod/udf/array_of_12_zeroes/metadata.yaml">Metadata File</a> </p>
<hr />
<h2 id="array_slice"><a href="#array_slice">array_slice</a></h2>
<p><strong>Array Slice</strong></p>
<p><code>udf.array_slice</code></p>
<p><a href="https://github.com/mozilla/bigquery-etl/blob/generated-sql/sql/moz-fx-data-shared-prod/udf/array_slice">Source Directory</a>  | <a href="https://github.com/mozilla/bigquery-etl/blob/generated-sql/sql/moz-fx-data-shared-prod/udf/array_slice/metadata.yaml">Metadata File</a> </p>
<hr />
<h2 id="bitcount_lowest_7"><a href="#bitcount_lowest_7">bitcount_lowest_7</a></h2>
<p><strong>Bitcount Lowest 7</strong></p>
<p><code>udf.bitcount_lowest_7</code></p>
<p>This function counts the 1s in lowest 7 bits of an INT64</p>
<p><a href="https://github.com/mozilla/bigquery-etl/blob/generated-sql/sql/moz-fx-data-shared-prod/udf/bitcount_lowest_7">Source Directory</a>  | <a href="https://github.com/mozilla/bigquery-etl/blob/generated-sql/sql/moz-fx-data-shared-prod/udf/bitcount_lowest_7/metadata.yaml">Metadata File</a> </p>
<hr />
<h2 id="bitmask_365"><a href="#bitmask_365">bitmask_365</a></h2>
<p><strong>Bitmask 365</strong></p>
<p><code>udf.bitmask_365</code></p>
<p>A bitmask for 365 bits</p>
<p><a href="https://github.com/mozilla/bigquery-etl/blob/generated-sql/sql/moz-fx-data-shared-prod/udf/bitmask_365">Source Directory</a>  | <a href="https://github.com/mozilla/bigquery-etl/blob/generated-sql/sql/moz-fx-data-shared-prod/udf/bitmask_365/metadata.yaml">Metadata File</a> </p>
<hr />
<h2 id="bitmask_lowest_28"><a href="#bitmask_lowest_28">bitmask_lowest_28</a></h2>
<p><strong>Bitmask Lowest 28</strong></p>
<p><code>udf.bitmask_lowest_28</code></p>
<p><a href="https://github.com/mozilla/bigquery-etl/blob/generated-sql/sql/moz-fx-data-shared-prod/udf/bitmask_lowest_28">Source Directory</a>  | <a href="https://github.com/mozilla/bigquery-etl/blob/generated-sql/sql/moz-fx-data-shared-prod/udf/bitmask_lowest_28/metadata.yaml">Metadata File</a> </p>
<hr />
<h2 id="bitmask_lowest_7"><a href="#bitmask_lowest_7">bitmask_lowest_7</a></h2>
<p><strong>Bitmask Lowest 7</strong></p>
<p><code>udf.bitmask_lowest_7</code></p>
<p><a href="https://github.com/mozilla/bigquery-etl/blob/generated-sql/sql/moz-fx-data-shared-prod/udf/bitmask_lowest_7">Source Directory</a>  | <a href="https://github.com/mozilla/bigquery-etl/blob/generated-sql/sql/moz-fx-data-shared-prod/udf/bitmask_lowest_7/metadata.yaml">Metadata File</a> </p>
<hr />
<h2 id="bitmask_range"><a href="#bitmask_range">bitmask_range</a></h2>
<p><strong>Bitmask Range</strong></p>
<p><code>udf.bitmask_range</code></p>
<p>Returns a bitmask that can be used to return a subset of an integer representing a bit array. The start_ordinal argument is an integer specifying the starting position of the slice, with start_ordinal = 1 indicating the first bit. The length argument is the number of bits to include in the mask.  The arguments were chosen to match the semantics of the SUBSTR function; see https://cloud.google.com/bigquery/docs/reference/standard-sql/functions-and-operators#substr</p>
<p><a href="https://github.com/mozilla/bigquery-etl/blob/generated-sql/sql/moz-fx-data-shared-prod/udf/bitmask_range">Source Directory</a>  | <a href="https://github.com/mozilla/bigquery-etl/blob/generated-sql/sql/moz-fx-data-shared-prod/udf/bitmask_range/metadata.yaml">Metadata File</a> </p>
<hr />
<h2 id="bits28_active_in_range"><a href="#bits28_active_in_range">bits28_active_in_range</a></h2>
<p><strong>Bits28 Active In Range</strong></p>
<p><code>udf.bits28_active_in_range</code></p>
<p><a href="https://github.com/mozilla/bigquery-etl/blob/generated-sql/sql/moz-fx-data-shared-prod/udf/bits28_active_in_range">Source Directory</a>  | <a href="https://github.com/mozilla/bigquery-etl/blob/generated-sql/sql/moz-fx-data-shared-prod/udf/bits28_active_in_range/metadata.yaml">Metadata File</a> </p>
<hr />
<h2 id="bits28_days_since_seen"><a href="#bits28_days_since_seen">bits28_days_since_seen</a></h2>
<p><strong>Bits28 Days Since Seen</strong></p>
<p><code>udf.bits28_days_since_seen</code></p>
<p><a href="https://github.com/mozilla/bigquery-etl/blob/generated-sql/sql/moz-fx-data-shared-prod/udf/bits28_days_since_seen">Source Directory</a>  | <a href="https://github.com/mozilla/bigquery-etl/blob/generated-sql/sql/moz-fx-data-shared-prod/udf/bits28_days_since_seen/metadata.yaml">Metadata File</a> </p>
<hr />
<h2 id="bits28_from_string"><a href="#bits28_from_string">bits28_from_string</a></h2>
<p><strong>Bits28 From String</strong></p>
<p><code>udf.bits28_from_string</code></p>
<p><a href="https://github.com/mozilla/bigquery-etl/blob/generated-sql/sql/moz-fx-data-shared-prod/udf/bits28_from_string">Source Directory</a>  | <a href="https://github.com/mozilla/bigquery-etl/blob/generated-sql/sql/moz-fx-data-shared-prod/udf/bits28_from_string/metadata.yaml">Metadata File</a> </p>
<hr />
<h2 id="bits28_range"><a href="#bits28_range">bits28_range</a></h2>
<p><strong>Bits28 Range</strong></p>
<p><code>udf.bits28_range</code></p>
<p><a href="https://github.com/mozilla/bigquery-etl/blob/generated-sql/sql/moz-fx-data-shared-prod/udf/bits28_range">Source Directory</a>  | <a href="https://github.com/mozilla/bigquery-etl/blob/generated-sql/sql/moz-fx-data-shared-prod/udf/bits28_range/metadata.yaml">Metadata File</a> </p>
<hr />
<h2 id="bits28_retention"><a href="#bits28_retention">bits28_retention</a></h2>
<p><strong>Bits28 Retention</strong></p>
<p><code>udf.bits28_retention</code></p>
<p><a href="https://github.com/mozilla/bigquery-etl/blob/generated-sql/sql/moz-fx-data-shared-prod/udf/bits28_retention">Source Directory</a>  | <a href="https://github.com/mozilla/bigquery-etl/blob/generated-sql/sql/moz-fx-data-shared-prod/udf/bits28_retention/metadata.yaml">Metadata File</a> </p>
<hr />
<h2 id="bits28_to_dates"><a href="#bits28_to_dates">bits28_to_dates</a></h2>
<p><strong>Bits28 To Dates</strong></p>
<p><code>udf.bits28_to_dates</code></p>
<p><a href="https://github.com/mozilla/bigquery-etl/blob/generated-sql/sql/moz-fx-data-shared-prod/udf/bits28_to_dates">Source Directory</a>  | <a href="https://github.com/mozilla/bigquery-etl/blob/generated-sql/sql/moz-fx-data-shared-prod/udf/bits28_to_dates/metadata.yaml">Metadata File</a> </p>
<hr />
<h2 id="bits28_to_string"><a href="#bits28_to_string">bits28_to_string</a></h2>
<p><strong>Bits28 To String</strong></p>
<p><code>udf.bits28_to_string</code></p>
<p><a href="https://github.com/mozilla/bigquery-etl/blob/generated-sql/sql/moz-fx-data-shared-prod/udf/bits28_to_string">Source Directory</a>  | <a href="https://github.com/mozilla/bigquery-etl/blob/generated-sql/sql/moz-fx-data-shared-prod/udf/bits28_to_string/metadata.yaml">Metadata File</a> </p>
<hr />
<h2 id="bits_from_offsets"><a href="#bits_from_offsets">bits_from_offsets</a></h2>
<p><strong>Bits From Offsets</strong></p>
<p><code>udf.bits_from_offsets</code></p>
<p>Returns a bit pattern of type BYTES compactly encoding the given array of positive integer offsets.
This is primarily useful to generate a compact encoding of dates on which a feature was used, with arbitrarily long history. Example aggregation:
<code>sql bits_from_offsets(
  ARRAY_AGG(IF(foo, DATE_DIFF(anchor_date, submission_date, DAY), NULL)
            IGNORE NULLS)
)</code>
The resulting value can be cast to an INT64 representing the most recent 64 days via:
<code>sql CAST(CONCAT('0x', TO_HEX(RIGHT(bits &gt;&gt; i, 4))) AS INT64)</code>
Or representing the most recent 28 days (compatible with bits28 functions) via:
<code>sql CAST(CONCAT('0x', TO_HEX(RIGHT(bits &gt;&gt; i, 4))) AS INT64) &lt;&lt; 36 &gt;&gt; 36</code></p>
<p><a href="https://github.com/mozilla/bigquery-etl/blob/generated-sql/sql/moz-fx-data-shared-prod/udf/bits_from_offsets">Source Directory</a>  | <a href="https://github.com/mozilla/bigquery-etl/blob/generated-sql/sql/moz-fx-data-shared-prod/udf/bits_from_offsets/metadata.yaml">Metadata File</a> </p>
<hr />
<h2 id="bits_to_active_n_weeks_ago"><a href="#bits_to_active_n_weeks_ago">bits_to_active_n_weeks_ago</a></h2>
<p><strong>Bits To Active N Weeks Ago</strong></p>
<p><code>udf.bits_to_active_n_weeks_ago</code></p>
<p>Given a BYTE and an INT64, return whether the user was active that many weeks ago.  NULL input returns NULL output.</p>
<p><a href="https://github.com/mozilla/bigquery-etl/blob/generated-sql/sql/moz-fx-data-shared-prod/udf/bits_to_active_n_weeks_ago">Source Directory</a>  | <a href="https://github.com/mozilla/bigquery-etl/blob/generated-sql/sql/moz-fx-data-shared-prod/udf/bits_to_active_n_weeks_ago/metadata.yaml">Metadata File</a> </p>
<hr />
<h2 id="bits_to_days_seen"><a href="#bits_to_days_seen">bits_to_days_seen</a></h2>
<p><strong>Bits To Days Seen</strong></p>
<p><code>udf.bits_to_days_seen</code></p>
<p>Given a BYTE, get the number of days the user was seen. NULL input returns NULL output.</p>
<p><a href="https://github.com/mozilla/bigquery-etl/blob/generated-sql/sql/moz-fx-data-shared-prod/udf/bits_to_days_seen">Source Directory</a>  | <a href="https://github.com/mozilla/bigquery-etl/blob/generated-sql/sql/moz-fx-data-shared-prod/udf/bits_to_days_seen/metadata.yaml">Metadata File</a> </p>
<hr />
<h2 id="bits_to_days_since_first_seen"><a href="#bits_to_days_since_first_seen">bits_to_days_since_first_seen</a></h2>
<p><strong>Bits To Days Since First Seen</strong></p>
<p><code>udf.bits_to_days_since_first_seen</code></p>
<p>Given a BYTES, return the number of days since the client was first seen.  If no bits are set, returns NULL, indicating we don't know. Otherwise the result is 0-indexed, meaning that for \x01, it will return 0.  Results showed this being between 5-10x faster than the simpler alternative: CREATE OR REPLACE FUNCTION udf.bits_to_days_since_first_seen(b BYTES) AS ((     SELECT MAX(n)     FROM UNNEST(GENERATE_ARRAY( 0, 8 * BYTE_LENGTH(b))) AS n     WHERE BIT_COUNT(SUBSTR(b &gt;&gt; n, -1) &amp; b'\x01') &gt; 0)); See also: bits_to_days_since_seen.sql</p>
<p><a href="https://github.com/mozilla/bigquery-etl/blob/generated-sql/sql/moz-fx-data-shared-prod/udf/bits_to_days_since_first_seen">Source Directory</a>  | <a href="https://github.com/mozilla/bigquery-etl/blob/generated-sql/sql/moz-fx-data-shared-prod/udf/bits_to_days_since_first_seen/metadata.yaml">Metadata File</a> </p>
<hr />
<h2 id="bits_to_days_since_seen"><a href="#bits_to_days_since_seen">bits_to_days_since_seen</a></h2>
<p><strong>Bits To Days Since Seen</strong></p>
<p><code>udf.bits_to_days_since_seen</code></p>
<p>Given a BYTES, return the number of days since the client was last seen.  If no bits are set, returns NULL, indicating we don't know. Otherwise the results are 0-indexed, meaning \x01 will return 0.  Tests showed this being 5-10x faster than the simpler alternative: CREATE OR REPLACE FUNCTION   udf.bits_to_days_since_seen(b BYTES) AS ((     SELECT MIN(n)     FROM UNNEST(GENERATE_ARRAY(0, 364)) AS n     WHERE BIT_COUNT(SUBSTR(b &gt;&gt; n, -1) &amp; b'\x01') &gt; 0)); See also: bits_to_days_since_first_seen.sql</p>
<p><a href="https://github.com/mozilla/bigquery-etl/blob/generated-sql/sql/moz-fx-data-shared-prod/udf/bits_to_days_since_seen">Source Directory</a>  | <a href="https://github.com/mozilla/bigquery-etl/blob/generated-sql/sql/moz-fx-data-shared-prod/udf/bits_to_days_since_seen/metadata.yaml">Metadata File</a> </p>
<hr />
<h2 id="bool_to_365_bits"><a href="#bool_to_365_bits">bool_to_365_bits</a></h2>
<p><strong>Bool To 365 Bits</strong></p>
<p><code>udf.bool_to_365_bits</code></p>
<p>Convert a boolean to 365 bit byte array</p>
<p><a href="https://github.com/mozilla/bigquery-etl/blob/generated-sql/sql/moz-fx-data-shared-prod/udf/bool_to_365_bits">Source Directory</a>  | <a href="https://github.com/mozilla/bigquery-etl/blob/generated-sql/sql/moz-fx-data-shared-prod/udf/bool_to_365_bits/metadata.yaml">Metadata File</a> </p>
<hr />
<h2 id="boolean_histogram_to_boolean"><a href="#boolean_histogram_to_boolean">boolean_histogram_to_boolean</a></h2>
<p><strong>Boolean Histogram To Boolean</strong></p>
<p><code>udf.boolean_histogram_to_boolean</code></p>
<p>Given histogram h, return TRUE if it has a value in the "true" bucket, or FALSE if it has a value in the "false" bucket, or NULL otherwise. https://github.com/mozilla/telemetry-batch-view/blob/ea0733c/src/main/scala/com/mozilla/telemetry/utils/MainPing.scala#L309-L317</p>
<p><a href="https://github.com/mozilla/bigquery-etl/blob/generated-sql/sql/moz-fx-data-shared-prod/udf/boolean_histogram_to_boolean">Source Directory</a>  | <a href="https://github.com/mozilla/bigquery-etl/blob/generated-sql/sql/moz-fx-data-shared-prod/udf/boolean_histogram_to_boolean/metadata.yaml">Metadata File</a> </p>
<hr />
<h2 id="coalesce_adjacent_days_28_bits"><a href="#coalesce_adjacent_days_28_bits">coalesce_adjacent_days_28_bits</a></h2>
<p><strong>Coalesce Adjacent Days 28 Bits</strong></p>
<p><code>udf.coalesce_adjacent_days_28_bits</code></p>
<p>We generally want to believe only the first reasonable profile creation date that we receive from a client. Given bits representing usage from the previous day and the current day, this function shifts the first argument by one day and returns either that value if non-zero and non-null, the current day value if non-zero and non-null, or else 0.</p>
<p><a href="https://github.com/mozilla/bigquery-etl/blob/generated-sql/sql/moz-fx-data-shared-prod/udf/coalesce_adjacent_days_28_bits">Source Directory</a>  | <a href="https://github.com/mozilla/bigquery-etl/blob/generated-sql/sql/moz-fx-data-shared-prod/udf/coalesce_adjacent_days_28_bits/metadata.yaml">Metadata File</a> </p>
<hr />
<h2 id="coalesce_adjacent_days_365_bits"><a href="#coalesce_adjacent_days_365_bits">coalesce_adjacent_days_365_bits</a></h2>
<p><strong>Coalesce Adjacent Days 365 Bits</strong></p>
<p><code>udf.coalesce_adjacent_days_365_bits</code></p>
<p>Coalesce previous data's PCD with the new data's PCD. We generally want to believe only the first reasonable profile creation date that we receive from a client. Given bytes representing usage from the previous day and the current day, this function shifts the first argument by one day and returns either that value if non-zero and non-null, the current day value if non-zero and non-null, or else 0.</p>
<p><a href="https://github.com/mozilla/bigquery-etl/blob/generated-sql/sql/moz-fx-data-shared-prod/udf/coalesce_adjacent_days_365_bits">Source Directory</a>  | <a href="https://github.com/mozilla/bigquery-etl/blob/generated-sql/sql/moz-fx-data-shared-prod/udf/coalesce_adjacent_days_365_bits/metadata.yaml">Metadata File</a> </p>
<hr />
<h2 id="combine_adjacent_days_28_bits"><a href="#combine_adjacent_days_28_bits">combine_adjacent_days_28_bits</a></h2>
<p><strong>Combine Adjacent Days 28 Bits</strong></p>
<p><code>udf.combine_adjacent_days_28_bits</code></p>
<p>Combines two bit patterns. The first pattern represents activity over a 28-day period ending "yesterday". The second pattern represents activity as observed today (usually just 0 or 1). We shift the bits in the first pattern by one to set the new baseline as "today", then perform a bitwise OR of the two patterns.</p>
<p><a href="https://github.com/mozilla/bigquery-etl/blob/generated-sql/sql/moz-fx-data-shared-prod/udf/combine_adjacent_days_28_bits">Source Directory</a>  | <a href="https://github.com/mozilla/bigquery-etl/blob/generated-sql/sql/moz-fx-data-shared-prod/udf/combine_adjacent_days_28_bits/metadata.yaml">Metadata File</a> </p>
<hr />
<h2 id="combine_adjacent_days_365_bits"><a href="#combine_adjacent_days_365_bits">combine_adjacent_days_365_bits</a></h2>
<p><strong>Combine Adjacent Days 365 Bits</strong></p>
<p><code>udf.combine_adjacent_days_365_bits</code></p>
<p><a href="https://github.com/mozilla/bigquery-etl/blob/generated-sql/sql/moz-fx-data-shared-prod/udf/combine_adjacent_days_365_bits">Source Directory</a>  | <a href="https://github.com/mozilla/bigquery-etl/blob/generated-sql/sql/moz-fx-data-shared-prod/udf/combine_adjacent_days_365_bits/metadata.yaml">Metadata File</a> </p>
<hr />
<h2 id="combine_days_seen_maps"><a href="#combine_days_seen_maps">combine_days_seen_maps</a></h2>
<p><strong>Combine Days Seen Maps</strong></p>
<p><code>udf.combine_days_seen_maps</code></p>
<p>The "clients_last_seen" class of tables represent various types of client activity within a 28-day window as bit patterns. This function takes in two arrays of structs (aka maps) where each entry gives the bit pattern for days in which we saw a ping for a given user in a given key. We combine the bit patterns for the previous day and the current day, returning a single map. See <code>udf.combine_experiment_days</code> for a more specific example of this approach.</p>
<p><a href="https://github.com/mozilla/bigquery-etl/blob/generated-sql/sql/moz-fx-data-shared-prod/udf/combine_days_seen_maps">Source Directory</a>  | <a href="https://github.com/mozilla/bigquery-etl/blob/generated-sql/sql/moz-fx-data-shared-prod/udf/combine_days_seen_maps/metadata.yaml">Metadata File</a> </p>
<hr />
<h2 id="combine_experiment_days"><a href="#combine_experiment_days">combine_experiment_days</a></h2>
<p><strong>Combine Experiment Days</strong></p>
<p><code>udf.combine_experiment_days</code></p>
<p>The "clients_last_seen" class of tables represent various types of client activity within a 28-day window as bit patterns.  This function takes in two arrays of structs where each entry gives the bit pattern for days in which we saw a ping for a given user in a given experiment. We combine the bit patterns for the previous day and the current day, returning a single array of experiment structs.</p>
<p><a href="https://github.com/mozilla/bigquery-etl/blob/generated-sql/sql/moz-fx-data-shared-prod/udf/combine_experiment_days">Source Directory</a>  | <a href="https://github.com/mozilla/bigquery-etl/blob/generated-sql/sql/moz-fx-data-shared-prod/udf/combine_experiment_days/metadata.yaml">Metadata File</a> </p>
<hr />
<h2 id="country_code_to_flag"><a href="#country_code_to_flag">country_code_to_flag</a></h2>
<p><strong>Country Code To Flag</strong></p>
<p><code>udf.country_code_to_flag</code></p>
<p>For a given two-letter ISO 3166-1 alpha-2 country code, returns a string consisting of two Unicode regional indicator symbols, which is rendered in supporting fonts (such as in the BigQuery console or STMO) as flag emoji.  This is just for fun. See:  - https://en.wikipedia.org/wiki/ISO_3166-1_alpha-2 - https://en.wikipedia.org/wiki/Regional_Indicator_Symbol</p>
<p><a href="https://github.com/mozilla/bigquery-etl/blob/generated-sql/sql/moz-fx-data-shared-prod/udf/country_code_to_flag">Source Directory</a>  | <a href="https://github.com/mozilla/bigquery-etl/blob/generated-sql/sql/moz-fx-data-shared-prod/udf/country_code_to_flag/metadata.yaml">Metadata File</a> </p>
<hr />
<h2 id="days_seen_bytes_to_rfm"><a href="#days_seen_bytes_to_rfm">days_seen_bytes_to_rfm</a></h2>
<p><strong>Days Seen Bytes To Rfm</strong></p>
<p><code>udf.days_seen_bytes_to_rfm</code></p>
<p>Return the frequency, recency, and T from a BYTE array, as defined in https://lifetimes.readthedocs.io/en/latest/Quickstart.html#the-shape-of-your-data RFM refers to Recency, Frequency, and Monetary value.</p>
<p><a href="https://github.com/mozilla/bigquery-etl/blob/generated-sql/sql/moz-fx-data-shared-prod/udf/days_seen_bytes_to_rfm">Source Directory</a>  | <a href="https://github.com/mozilla/bigquery-etl/blob/generated-sql/sql/moz-fx-data-shared-prod/udf/days_seen_bytes_to_rfm/metadata.yaml">Metadata File</a> </p>
<hr />
<h2 id="days_since_created_profile_as_28_bits"><a href="#days_since_created_profile_as_28_bits">days_since_created_profile_as_28_bits</a></h2>
<p><strong>Days Since Created Profile As 28 Bits</strong></p>
<p><code>udf.days_since_created_profile_as_28_bits</code></p>
<p>Takes in a difference between submission date and profile creation date and returns a bit pattern representing the profile creation date IFF the profile date is the same as the submission date or no more than 6 days earlier. Analysis has shown that client-reported profile creation dates are much less reliable outside of this range and cannot be used as reliable indicators of new profile creation.</p>
<p><a href="https://github.com/mozilla/bigquery-etl/blob/generated-sql/sql/moz-fx-data-shared-prod/udf/days_since_created_profile_as_28_bits">Source Directory</a>  | <a href="https://github.com/mozilla/bigquery-etl/blob/generated-sql/sql/moz-fx-data-shared-prod/udf/days_since_created_profile_as_28_bits/metadata.yaml">Metadata File</a> </p>
<hr />
<h2 id="deanonymize_event"><a href="#deanonymize_event">deanonymize_event</a></h2>
<p><strong>Deanonymize Event</strong></p>
<p><code>udf.deanonymize_event</code></p>
<p>Rename struct fields in anonymous event tuples to meaningful names.</p>
<p><a href="https://github.com/mozilla/bigquery-etl/blob/generated-sql/sql/moz-fx-data-shared-prod/udf/deanonymize_event">Source Directory</a>  | <a href="https://github.com/mozilla/bigquery-etl/blob/generated-sql/sql/moz-fx-data-shared-prod/udf/deanonymize_event/metadata.yaml">Metadata File</a> </p>
<hr />
<h2 id="decode_int64"><a href="#decode_int64">decode_int64</a></h2>
<p><strong>Decode Int64</strong></p>
<p><code>udf.decode_int64</code></p>
<p><a href="https://github.com/mozilla/bigquery-etl/blob/generated-sql/sql/moz-fx-data-shared-prod/udf/decode_int64">Source Directory</a>  | <a href="https://github.com/mozilla/bigquery-etl/blob/generated-sql/sql/moz-fx-data-shared-prod/udf/decode_int64/metadata.yaml">Metadata File</a> </p>
<hr />
<h2 id="dedupe_array"><a href="#dedupe_array">dedupe_array</a></h2>
<p><strong>Dedupe Array</strong></p>
<p><code>udf.dedupe_array</code></p>
<p>Return an array containing only distinct values of the given array</p>
<p><a href="https://github.com/mozilla/bigquery-etl/blob/generated-sql/sql/moz-fx-data-shared-prod/udf/dedupe_array">Source Directory</a>  | <a href="https://github.com/mozilla/bigquery-etl/blob/generated-sql/sql/moz-fx-data-shared-prod/udf/dedupe_array/metadata.yaml">Metadata File</a> </p>
<hr />
<h2 id="event_code_points_to_string"><a href="#event_code_points_to_string">event_code_points_to_string</a></h2>
<p><code>udf.event_code_points_to_string</code></p>
<p><a href="https://github.com/mozilla/bigquery-etl/blob/generated-sql/sql/moz-fx-data-shared-prod/udf/event_code_points_to_string">Source Directory</a> </p>
<hr />
<h2 id="experiment_search_metric_to_array"><a href="#experiment_search_metric_to_array">experiment_search_metric_to_array</a></h2>
<p><strong>Experiment search metric to array</strong></p>
<p><code>udf.experiment_search_metric_to_array</code></p>
<p>Used for testing only. Reproduces the string transformations done in experiment_search_events_live_v1 materialized views.</p>
<p><a href="https://github.com/mozilla/bigquery-etl/blob/generated-sql/sql/moz-fx-data-shared-prod/udf/experiment_search_metric_to_array">Source Directory</a>  | <a href="https://github.com/mozilla/bigquery-etl/blob/generated-sql/sql/moz-fx-data-shared-prod/udf/experiment_search_metric_to_array/metadata.yaml">Metadata File</a> </p>
<hr />
<h2 id="extract_count_histogram_value"><a href="#extract_count_histogram_value">extract_count_histogram_value</a></h2>
<p><strong>Extract Count Histogram Value</strong></p>
<p><code>udf.extract_count_histogram_value</code></p>
<p><a href="https://github.com/mozilla/bigquery-etl/blob/generated-sql/sql/moz-fx-data-shared-prod/udf/extract_count_histogram_value">Source Directory</a>  | <a href="https://github.com/mozilla/bigquery-etl/blob/generated-sql/sql/moz-fx-data-shared-prod/udf/extract_count_histogram_value/metadata.yaml">Metadata File</a> </p>
<hr />
<h2 id="extract_document_type"><a href="#extract_document_type">extract_document_type</a></h2>
<p><strong>Extract Document Type</strong></p>
<p><code>udf.extract_document_type</code></p>
<p>Extract the document type from a table name e.g. _TABLE_SUFFIX.</p>
<p><a href="https://github.com/mozilla/bigquery-etl/blob/generated-sql/sql/moz-fx-data-shared-prod/udf/extract_document_type">Source Directory</a>  | <a href="https://github.com/mozilla/bigquery-etl/blob/generated-sql/sql/moz-fx-data-shared-prod/udf/extract_document_type/metadata.yaml">Metadata File</a> </p>
<hr />
<h2 id="extract_document_version"><a href="#extract_document_version">extract_document_version</a></h2>
<p><strong>Extract Document Version</strong></p>
<p><code>udf.extract_document_version</code></p>
<p>Extract the document version from a table name e.g. _TABLE_SUFFIX.</p>
<p><a href="https://github.com/mozilla/bigquery-etl/blob/generated-sql/sql/moz-fx-data-shared-prod/udf/extract_document_version">Source Directory</a>  | <a href="https://github.com/mozilla/bigquery-etl/blob/generated-sql/sql/moz-fx-data-shared-prod/udf/extract_document_version/metadata.yaml">Metadata File</a> </p>
<hr />
<h2 id="extract_histogram_sum"><a href="#extract_histogram_sum">extract_histogram_sum</a></h2>
<p><strong>Extract Histogram Sum</strong></p>
<p><code>udf.extract_histogram_sum</code></p>
<p>This is a performance optimization compared to the more general mozfun.hist.extract for cases where only the histogram sum is needed.  It must support all the same format variants as mozfun.hist.extract but this simplification is necessary to keep the main_summary query complexity in check.</p>
<p><a href="https://github.com/mozilla/bigquery-etl/blob/generated-sql/sql/moz-fx-data-shared-prod/udf/extract_histogram_sum">Source Directory</a>  | <a href="https://github.com/mozilla/bigquery-etl/blob/generated-sql/sql/moz-fx-data-shared-prod/udf/extract_histogram_sum/metadata.yaml">Metadata File</a> </p>
<hr />
<h2 id="extract_schema_validation_path"><a href="#extract_schema_validation_path">extract_schema_validation_path</a></h2>
<p><strong>Extract Schema Validation Path</strong></p>
<p><code>udf.extract_schema_validation_path</code></p>
<p>Return a path derived from an error message in <code>payload_bytes_error</code></p>
<p><a href="https://github.com/mozilla/bigquery-etl/blob/generated-sql/sql/moz-fx-data-shared-prod/udf/extract_schema_validation_path">Source Directory</a>  | <a href="https://github.com/mozilla/bigquery-etl/blob/generated-sql/sql/moz-fx-data-shared-prod/udf/extract_schema_validation_path/metadata.yaml">Metadata File</a> </p>
<hr />
<h2 id="fenix_build_to_datetime"><a href="#fenix_build_to_datetime">fenix_build_to_datetime</a></h2>
<p><strong>Fenix Build To Datetime</strong></p>
<p><code>udf.fenix_build_to_datetime</code></p>
<p>Convert the Fenix client_info.app_build-format string to a DATETIME.
May return NULL on failure.</p>
<p>Fenix originally used an <a href="https://github.com/mozilla-mobile/fenix/blob/c7283447/automation/gradle/versionCode.gradle#L12-L16">8-digit app_build format</a></p>
<p>In short it is <code>yDDDHHmm</code>:</p>
<ul>
<li>y is years since 2018</li>
<li>DDD is day of year, 0-padded, 001-366</li>
<li>HH is hour of day, 00-23</li>
<li>mm is minute of hour, 00-59</li>
</ul>
<p>The last date seen with an 8-digit build ID is 2020-08-10.</p>
<p>Newer builds use a <a href="https://github.com/mozilla-mobile/fenix/blob/e6ee13dc/buildSrc/src/main/java/Config.kt#L55-L112">10-digit format</a>
where the integer represents a pattern consisting of 32 bits.
The 17 bits starting 13 bits from the left represent a number of hours since
UTC midnight beginning 2014-12-28.</p>
<p>This function tolerates both formats.</p>
<p>After using this you may wish to <code>DATETIME_TRUNC(result, DAY)</code> for grouping
by build date.</p>
<p><a href="https://github.com/mozilla/bigquery-etl/blob/generated-sql/sql/moz-fx-data-shared-prod/udf/fenix_build_to_datetime">Source Directory</a>  | <a href="https://github.com/mozilla/bigquery-etl/blob/generated-sql/sql/moz-fx-data-shared-prod/udf/fenix_build_to_datetime/metadata.yaml">Metadata File</a> </p>
<hr />
<h2 id="ga_is_mozilla_browser"><a href="#ga_is_mozilla_browser">ga_is_mozilla_browser</a></h2>
<p><strong>Is Mozilla Browser</strong></p>
<p><code>udf.ga_is_mozilla_browser</code></p>
<p>Determine if a browser in a Google Analytics data is produced by Mozilla</p>
<p><a href="https://github.com/mozilla/bigquery-etl/blob/generated-sql/sql/moz-fx-data-shared-prod/udf/ga_is_mozilla_browser">Source Directory</a>  | <a href="https://github.com/mozilla/bigquery-etl/blob/generated-sql/sql/moz-fx-data-shared-prod/udf/ga_is_mozilla_browser/metadata.yaml">Metadata File</a> </p>
<hr />
<h2 id="geo_struct"><a href="#geo_struct">geo_struct</a></h2>
<p><strong>Geo Struct</strong></p>
<p><code>udf.geo_struct</code></p>
<p>Convert geoip lookup fields to a struct, replacing '??' with NULL.  Returns NULL if if required field country would be NULL. Replaces '??' with NULL because '??' is a placeholder that may be used if there was an issue during geoip lookup in hindsight.</p>
<p><a href="https://github.com/mozilla/bigquery-etl/blob/generated-sql/sql/moz-fx-data-shared-prod/udf/geo_struct">Source Directory</a>  | <a href="https://github.com/mozilla/bigquery-etl/blob/generated-sql/sql/moz-fx-data-shared-prod/udf/geo_struct/metadata.yaml">Metadata File</a> </p>
<hr />
<h2 id="get_key"><a href="#get_key">get_key</a></h2>
<p><strong>Get Key</strong></p>
<p><code>udf.get_key</code></p>
<p><a href="https://github.com/mozilla/bigquery-etl/blob/generated-sql/sql/moz-fx-data-shared-prod/udf/get_key">Source Directory</a>  | <a href="https://github.com/mozilla/bigquery-etl/blob/generated-sql/sql/moz-fx-data-shared-prod/udf/get_key/metadata.yaml">Metadata File</a> </p>
<hr />
<h2 id="get_key_with_null"><a href="#get_key_with_null">get_key_with_null</a></h2>
<p><strong>Get Key With Null</strong></p>
<p><code>udf.get_key_with_null</code></p>
<p><a href="https://github.com/mozilla/bigquery-etl/blob/generated-sql/sql/moz-fx-data-shared-prod/udf/get_key_with_null">Source Directory</a>  | <a href="https://github.com/mozilla/bigquery-etl/blob/generated-sql/sql/moz-fx-data-shared-prod/udf/get_key_with_null/metadata.yaml">Metadata File</a> </p>
<hr />
<h2 id="glean_timespan_nanos"><a href="#glean_timespan_nanos">glean_timespan_nanos</a></h2>
<p><strong>Glean Timespan Nanos</strong></p>
<p><code>udf.glean_timespan_nanos</code></p>
<p><a href="https://github.com/mozilla/bigquery-etl/blob/generated-sql/sql/moz-fx-data-shared-prod/udf/glean_timespan_nanos">Source Directory</a>  | <a href="https://github.com/mozilla/bigquery-etl/blob/generated-sql/sql/moz-fx-data-shared-prod/udf/glean_timespan_nanos/metadata.yaml">Metadata File</a> </p>
<hr />
<h2 id="glean_timespan_seconds"><a href="#glean_timespan_seconds">glean_timespan_seconds</a></h2>
<p><strong>Glean Timespan Seconds</strong></p>
<p><code>udf.glean_timespan_seconds</code></p>
<p><a href="https://github.com/mozilla/bigquery-etl/blob/generated-sql/sql/moz-fx-data-shared-prod/udf/glean_timespan_seconds">Source Directory</a>  | <a href="https://github.com/mozilla/bigquery-etl/blob/generated-sql/sql/moz-fx-data-shared-prod/udf/glean_timespan_seconds/metadata.yaml">Metadata File</a> </p>
<hr />
<h2 id="gzip_length_footer"><a href="#gzip_length_footer">gzip_length_footer</a></h2>
<p><strong>Gzip Length Footer</strong></p>
<p><code>udf.gzip_length_footer</code></p>
<p>Given a gzip compressed byte string, extract the uncompressed size from the footer.  WARNING: THIS FUNCTION IS NOT RELIABLE FOR ARBITRARY GZIP STREAMS. It should, however, be safe to use for checking the decompressed size of payload in payload_bytes_decoded (and NOT payload_bytes_raw) because that payload is produced by the decoder and limited to conditions where the footer is accurate. From https://stackoverflow.com/a/9213826 First, the only information about the uncompressed length is four bytes at the end of the gzip file (stored in little-endian order). By necessity, that is the length modulo 232. So if the uncompressed length is 4 GB or more, you won't know what the length is. You can only be certain that the uncompressed length is less than 4 GB if the compressed length is less than something like 232 / 1032 + 18, or around 4 MB. (1032 is the maximum compression factor of deflate.) Second, and this is worse, a gzip file may actually be a concatenation of multiple gzip streams. Other than decoding, there is no way to find where each gzip stream ends in order to look at the four-byte uncompressed length of that piece. (Which may be wrong anyway due to the first reason.) Third, gzip files will sometimes have junk after the end of the gzip stream (usually zeros). Then the last four bytes are not the length.</p>
<p><a href="https://github.com/mozilla/bigquery-etl/blob/generated-sql/sql/moz-fx-data-shared-prod/udf/gzip_length_footer">Source Directory</a>  | <a href="https://github.com/mozilla/bigquery-etl/blob/generated-sql/sql/moz-fx-data-shared-prod/udf/gzip_length_footer/metadata.yaml">Metadata File</a> </p>
<hr />
<h2 id="histogram_max_key_with_nonzero_value"><a href="#histogram_max_key_with_nonzero_value">histogram_max_key_with_nonzero_value</a></h2>
<p><strong>Histogram Max Key With Nonzero Value</strong></p>
<p><code>udf.histogram_max_key_with_nonzero_value</code></p>
<p>Find the largest numeric bucket that contains a value greater than zero. https://github.com/mozilla/telemetry-batch-view/blob/ea0733c/src/main/scala/com/mozilla/telemetry/utils/MainPing.scala#L253-L266</p>
<p><a href="https://github.com/mozilla/bigquery-etl/blob/generated-sql/sql/moz-fx-data-shared-prod/udf/histogram_max_key_with_nonzero_value">Source Directory</a>  | <a href="https://github.com/mozilla/bigquery-etl/blob/generated-sql/sql/moz-fx-data-shared-prod/udf/histogram_max_key_with_nonzero_value/metadata.yaml">Metadata File</a> </p>
<hr />
<h2 id="histogram_merge"><a href="#histogram_merge">histogram_merge</a></h2>
<p><strong>Histogram Merge</strong></p>
<p><code>udf.histogram_merge</code></p>
<p><a href="https://github.com/mozilla/bigquery-etl/blob/generated-sql/sql/moz-fx-data-shared-prod/udf/histogram_merge">Source Directory</a>  | <a href="https://github.com/mozilla/bigquery-etl/blob/generated-sql/sql/moz-fx-data-shared-prod/udf/histogram_merge/metadata.yaml">Metadata File</a> </p>
<hr />
<h2 id="histogram_normalize"><a href="#histogram_normalize">histogram_normalize</a></h2>
<p><strong>Histogram Normalize</strong></p>
<p><code>udf.histogram_normalize</code></p>
<p><a href="https://github.com/mozilla/bigquery-etl/blob/generated-sql/sql/moz-fx-data-shared-prod/udf/histogram_normalize">Source Directory</a>  | <a href="https://github.com/mozilla/bigquery-etl/blob/generated-sql/sql/moz-fx-data-shared-prod/udf/histogram_normalize/metadata.yaml">Metadata File</a> </p>
<hr />
<h2 id="histogram_percentiles"><a href="#histogram_percentiles">histogram_percentiles</a></h2>
<p><strong>Histogram Percentiles</strong></p>
<p><code>udf.histogram_percentiles</code></p>
<p><a href="https://github.com/mozilla/bigquery-etl/blob/generated-sql/sql/moz-fx-data-shared-prod/udf/histogram_percentiles">Source Directory</a>  | <a href="https://github.com/mozilla/bigquery-etl/blob/generated-sql/sql/moz-fx-data-shared-prod/udf/histogram_percentiles/metadata.yaml">Metadata File</a> </p>
<hr />
<h2 id="histogram_to_mean"><a href="#histogram_to_mean">histogram_to_mean</a></h2>
<p><strong>Histogram To Mean</strong></p>
<p><code>udf.histogram_to_mean</code></p>
<p><a href="https://github.com/mozilla/bigquery-etl/blob/generated-sql/sql/moz-fx-data-shared-prod/udf/histogram_to_mean">Source Directory</a>  | <a href="https://github.com/mozilla/bigquery-etl/blob/generated-sql/sql/moz-fx-data-shared-prod/udf/histogram_to_mean/metadata.yaml">Metadata File</a> </p>
<hr />
<h2 id="histogram_to_threshold_count"><a href="#histogram_to_threshold_count">histogram_to_threshold_count</a></h2>
<p><strong>Histogram To Threshold Count</strong></p>
<p><code>udf.histogram_to_threshold_count</code></p>
<p><a href="https://github.com/mozilla/bigquery-etl/blob/generated-sql/sql/moz-fx-data-shared-prod/udf/histogram_to_threshold_count">Source Directory</a>  | <a href="https://github.com/mozilla/bigquery-etl/blob/generated-sql/sql/moz-fx-data-shared-prod/udf/histogram_to_threshold_count/metadata.yaml">Metadata File</a> </p>
<hr />
<h2 id="hmac_sha256"><a href="#hmac_sha256">hmac_sha256</a></h2>
<p><strong>Hmac Sha256</strong></p>
<p><code>udf.hmac_sha256</code></p>
<p>Given a key and message, return the HMAC-SHA256 hash. This algorithm can be found in Wikipedia: https://en.wikipedia.org/wiki/HMAC#Implementation  This implentation is validated against the NIST test vectors. See test/validation/hmac_sha256.py for more information.</p>
<p><a href="https://github.com/mozilla/bigquery-etl/blob/generated-sql/sql/moz-fx-data-shared-prod/udf/hmac_sha256">Source Directory</a>  | <a href="https://github.com/mozilla/bigquery-etl/blob/generated-sql/sql/moz-fx-data-shared-prod/udf/hmac_sha256/metadata.yaml">Metadata File</a> </p>
<hr />
<h2 id="int_to_365_bits"><a href="#int_to_365_bits">int_to_365_bits</a></h2>
<p><strong>Int To 365 Bits</strong></p>
<p><code>udf.int_to_365_bits</code></p>
<p><a href="https://github.com/mozilla/bigquery-etl/blob/generated-sql/sql/moz-fx-data-shared-prod/udf/int_to_365_bits">Source Directory</a>  | <a href="https://github.com/mozilla/bigquery-etl/blob/generated-sql/sql/moz-fx-data-shared-prod/udf/int_to_365_bits/metadata.yaml">Metadata File</a> </p>
<hr />
<h2 id="int_to_hex_string"><a href="#int_to_hex_string">int_to_hex_string</a></h2>
<p><strong>Int To Hex String</strong></p>
<p><code>udf.int_to_hex_string</code></p>
<p><a href="https://github.com/mozilla/bigquery-etl/blob/generated-sql/sql/moz-fx-data-shared-prod/udf/int_to_hex_string">Source Directory</a>  | <a href="https://github.com/mozilla/bigquery-etl/blob/generated-sql/sql/moz-fx-data-shared-prod/udf/int_to_hex_string/metadata.yaml">Metadata File</a> </p>
<hr />
<h2 id="json_extract_histogram"><a href="#json_extract_histogram">json_extract_histogram</a></h2>
<p><strong>Json Extract Histogram</strong></p>
<p><code>udf.json_extract_histogram</code></p>
<p><a href="https://github.com/mozilla/bigquery-etl/blob/generated-sql/sql/moz-fx-data-shared-prod/udf/json_extract_histogram">Source Directory</a>  | <a href="https://github.com/mozilla/bigquery-etl/blob/generated-sql/sql/moz-fx-data-shared-prod/udf/json_extract_histogram/metadata.yaml">Metadata File</a> </p>
<hr />
<h2 id="json_extract_int_map"><a href="#json_extract_int_map">json_extract_int_map</a></h2>
<p><strong>Json Extract Int Map</strong></p>
<p><code>udf.json_extract_int_map</code></p>
<p><a href="https://github.com/mozilla/bigquery-etl/blob/generated-sql/sql/moz-fx-data-shared-prod/udf/json_extract_int_map">Source Directory</a>  | <a href="https://github.com/mozilla/bigquery-etl/blob/generated-sql/sql/moz-fx-data-shared-prod/udf/json_extract_int_map/metadata.yaml">Metadata File</a> </p>
<hr />
<h2 id="json_mode_last"><a href="#json_mode_last">json_mode_last</a></h2>
<p><strong>Json Mode Last</strong></p>
<p><code>udf.json_mode_last</code></p>
<p><a href="https://github.com/mozilla/bigquery-etl/blob/generated-sql/sql/moz-fx-data-shared-prod/udf/json_mode_last">Source Directory</a>  | <a href="https://github.com/mozilla/bigquery-etl/blob/generated-sql/sql/moz-fx-data-shared-prod/udf/json_mode_last/metadata.yaml">Metadata File</a> </p>
<hr />
<h2 id="keyed_histogram_get_sum"><a href="#keyed_histogram_get_sum">keyed_histogram_get_sum</a></h2>
<p><strong>Keyed Histogram Get Sum</strong></p>
<p><code>udf.keyed_histogram_get_sum</code></p>
<p>Take a keyed histogram of type STRUCT<key STRING, value STRING>, extract the histogram of the given key, and return the sum value</p>
<p><a href="https://github.com/mozilla/bigquery-etl/blob/generated-sql/sql/moz-fx-data-shared-prod/udf/keyed_histogram_get_sum">Source Directory</a>  | <a href="https://github.com/mozilla/bigquery-etl/blob/generated-sql/sql/moz-fx-data-shared-prod/udf/keyed_histogram_get_sum/metadata.yaml">Metadata File</a> </p>
<hr />
<h2 id="kv_array_append_to_json_string"><a href="#kv_array_append_to_json_string">kv_array_append_to_json_string</a></h2>
<p><strong>Kv Array Append To Json String</strong></p>
<p><code>udf.kv_array_append_to_json_string</code></p>
<p>Returns a JSON string which has the <code>pair</code> appended to the provided <code>input</code> JSON string. NULL is also valid for <code>input</code>. Examples:    udf.kv_array_append_to_json_string('{"foo":"bar"}', [STRUCT("baz" AS key, "boo" AS value)])    '{"foo":"bar","baz":"boo"}' udf.kv_array_append_to_json_string('{}', [STRUCT("baz" AS key, "boo" AS value)])    '{"baz": "boo"}'</p>
<p><a href="https://github.com/mozilla/bigquery-etl/blob/generated-sql/sql/moz-fx-data-shared-prod/udf/kv_array_append_to_json_string">Source Directory</a>  | <a href="https://github.com/mozilla/bigquery-etl/blob/generated-sql/sql/moz-fx-data-shared-prod/udf/kv_array_append_to_json_string/metadata.yaml">Metadata File</a> </p>
<hr />
<h2 id="kv_array_to_json_string"><a href="#kv_array_to_json_string">kv_array_to_json_string</a></h2>
<p><strong>Kv Array To Json String</strong></p>
<p><code>udf.kv_array_to_json_string</code></p>
<p>Returns a JSON string representing the input key-value array. Value type must be able to be represented as a string - this function will cast to a string. At Mozilla, the schema for a map is STRUCT<key_value ARRAY\<STRUCT\<key ANY TYPE, value ANY TYPE>>>. To use this with that representation, it should be as <code>udf.kv_array_to_json_string(struct.key_value)</code>.</p>
<p><a href="https://github.com/mozilla/bigquery-etl/blob/generated-sql/sql/moz-fx-data-shared-prod/udf/kv_array_to_json_string">Source Directory</a>  | <a href="https://github.com/mozilla/bigquery-etl/blob/generated-sql/sql/moz-fx-data-shared-prod/udf/kv_array_to_json_string/metadata.yaml">Metadata File</a> </p>
<hr />
<h2 id="main_summary_scalars"><a href="#main_summary_scalars">main_summary_scalars</a></h2>
<p><strong>Main Summary Scalars</strong></p>
<p><code>udf.main_summary_scalars</code></p>
<p><a href="https://github.com/mozilla/bigquery-etl/blob/generated-sql/sql/moz-fx-data-shared-prod/udf/main_summary_scalars">Source Directory</a>  | <a href="https://github.com/mozilla/bigquery-etl/blob/generated-sql/sql/moz-fx-data-shared-prod/udf/main_summary_scalars/metadata.yaml">Metadata File</a> </p>
<hr />
<h2 id="map_bing_revenue_country_to_country_code"><a href="#map_bing_revenue_country_to_country_code">map_bing_revenue_country_to_country_code</a></h2>
<p><strong>Map Bing Revenue Country To Country Code</strong></p>
<p><code>udf.map_bing_revenue_country_to_country_code</code></p>
<p>For use by LTV revenue join only. Maps the Bing country to a country code. Only keeps the country codes we want to aggregate on.</p>
<p><a href="https://github.com/mozilla/bigquery-etl/blob/generated-sql/sql/moz-fx-data-shared-prod/udf/map_bing_revenue_country_to_country_code">Source Directory</a>  | <a href="https://github.com/mozilla/bigquery-etl/blob/generated-sql/sql/moz-fx-data-shared-prod/udf/map_bing_revenue_country_to_country_code/metadata.yaml">Metadata File</a> </p>
<hr />
<h2 id="map_mode_last"><a href="#map_mode_last">map_mode_last</a></h2>
<p><strong>Map Mode Last</strong></p>
<p><code>udf.map_mode_last</code></p>
<p><a href="https://github.com/mozilla/bigquery-etl/blob/generated-sql/sql/moz-fx-data-shared-prod/udf/map_mode_last">Source Directory</a>  | <a href="https://github.com/mozilla/bigquery-etl/blob/generated-sql/sql/moz-fx-data-shared-prod/udf/map_mode_last/metadata.yaml">Metadata File</a> </p>
<hr />
<h2 id="map_revenue_country"><a href="#map_revenue_country">map_revenue_country</a></h2>
<p><strong>Map Revenue Country</strong></p>
<p><code>udf.map_revenue_country</code></p>
<p>Only for use by the LTV Revenue join.  Maps country codes to the codes we have in the revenue dataset. Buckets small Bing countries into "other".</p>
<p><a href="https://github.com/mozilla/bigquery-etl/blob/generated-sql/sql/moz-fx-data-shared-prod/udf/map_revenue_country">Source Directory</a>  | <a href="https://github.com/mozilla/bigquery-etl/blob/generated-sql/sql/moz-fx-data-shared-prod/udf/map_revenue_country/metadata.yaml">Metadata File</a> </p>
<hr />
<h2 id="map_sum"><a href="#map_sum">map_sum</a></h2>
<p><strong>Map Sum</strong></p>
<p><code>udf.map_sum</code></p>
<p><a href="https://github.com/mozilla/bigquery-etl/blob/generated-sql/sql/moz-fx-data-shared-prod/udf/map_sum">Source Directory</a>  | <a href="https://github.com/mozilla/bigquery-etl/blob/generated-sql/sql/moz-fx-data-shared-prod/udf/map_sum/metadata.yaml">Metadata File</a> </p>
<hr />
<h2 id="merge_scalar_user_data"><a href="#merge_scalar_user_data">merge_scalar_user_data</a></h2>
<p><strong>Merge Scalar User Data</strong></p>
<p><code>udf.merge_scalar_user_data</code></p>
<p>Given an array of scalar metric data that might have duplicate values for a metric, merge them into one value.</p>
<p><a href="https://github.com/mozilla/bigquery-etl/blob/generated-sql/sql/moz-fx-data-shared-prod/udf/merge_scalar_user_data">Source Directory</a>  | <a href="https://github.com/mozilla/bigquery-etl/blob/generated-sql/sql/moz-fx-data-shared-prod/udf/merge_scalar_user_data/metadata.yaml">Metadata File</a> </p>
<hr />
<h2 id="mod_uint128"><a href="#mod_uint128">mod_uint128</a></h2>
<p><strong>Mod Uint128</strong></p>
<p><code>udf.mod_uint128</code></p>
<p>This function returns "dividend mod divisor" where the dividend and the result is encoded in bytes, and divisor is an integer.</p>
<p><a href="https://github.com/mozilla/bigquery-etl/blob/generated-sql/sql/moz-fx-data-shared-prod/udf/mod_uint128">Source Directory</a>  | <a href="https://github.com/mozilla/bigquery-etl/blob/generated-sql/sql/moz-fx-data-shared-prod/udf/mod_uint128/metadata.yaml">Metadata File</a> </p>
<hr />
<h2 id="mode_last"><a href="#mode_last">mode_last</a></h2>
<p><strong>Mode Last</strong></p>
<p><code>udf.mode_last</code></p>
<p><a href="https://github.com/mozilla/bigquery-etl/blob/generated-sql/sql/moz-fx-data-shared-prod/udf/mode_last">Source Directory</a>  | <a href="https://github.com/mozilla/bigquery-etl/blob/generated-sql/sql/moz-fx-data-shared-prod/udf/mode_last/metadata.yaml">Metadata File</a> </p>
<hr />
<h2 id="mode_last_retain_nulls"><a href="#mode_last_retain_nulls">mode_last_retain_nulls</a></h2>
<p><strong>Mode Last Retain Nulls</strong></p>
<p><code>udf.mode_last_retain_nulls</code></p>
<p><a href="https://github.com/mozilla/bigquery-etl/blob/generated-sql/sql/moz-fx-data-shared-prod/udf/mode_last_retain_nulls">Source Directory</a>  | <a href="https://github.com/mozilla/bigquery-etl/blob/generated-sql/sql/moz-fx-data-shared-prod/udf/mode_last_retain_nulls/metadata.yaml">Metadata File</a> </p>
<hr />
<h2 id="new_monthly_engine_searches_struct"><a href="#new_monthly_engine_searches_struct">new_monthly_engine_searches_struct</a></h2>
<p><strong>New Monthly Engine Searches Struct</strong></p>
<p><code>udf.new_monthly_engine_searches_struct</code></p>
<p>This struct represents the past year's worth of searches. Each month has its own entry, hence 12.</p>
<p><a href="https://github.com/mozilla/bigquery-etl/blob/generated-sql/sql/moz-fx-data-shared-prod/udf/new_monthly_engine_searches_struct">Source Directory</a>  | <a href="https://github.com/mozilla/bigquery-etl/blob/generated-sql/sql/moz-fx-data-shared-prod/udf/new_monthly_engine_searches_struct/metadata.yaml">Metadata File</a> </p>
<hr />
<h2 id="normalize_fenix_metrics"><a href="#normalize_fenix_metrics">normalize_fenix_metrics</a></h2>
<p><strong>Normalize Fenix Metrics</strong></p>
<p><code>udf.normalize_fenix_metrics</code></p>
<p>Accepts a glean metrics struct as input and returns a modified struct that nulls out histograms for older versions of the Glean SDK that reported pathological binning; see https://bugzilla.mozilla.org/show_bug.cgi?id=1592930</p>
<p><a href="https://github.com/mozilla/bigquery-etl/blob/generated-sql/sql/moz-fx-data-shared-prod/udf/normalize_fenix_metrics">Source Directory</a>  | <a href="https://github.com/mozilla/bigquery-etl/blob/generated-sql/sql/moz-fx-data-shared-prod/udf/normalize_fenix_metrics/metadata.yaml">Metadata File</a> </p>
<hr />
<h2 id="normalize_glean_baseline_client_info"><a href="#normalize_glean_baseline_client_info">normalize_glean_baseline_client_info</a></h2>
<p><strong>Normalize Glean Baseline Client Info</strong></p>
<p><code>udf.normalize_glean_baseline_client_info</code></p>
<p><a href="https://github.com/mozilla/bigquery-etl/blob/generated-sql/sql/moz-fx-data-shared-prod/udf/normalize_glean_baseline_client_info">Source Directory</a>  | <a href="https://github.com/mozilla/bigquery-etl/blob/generated-sql/sql/moz-fx-data-shared-prod/udf/normalize_glean_baseline_client_info/metadata.yaml">Metadata File</a> </p>
<hr />
<h2 id="normalize_glean_ping_info"><a href="#normalize_glean_ping_info">normalize_glean_ping_info</a></h2>
<p><strong>Normalize Glean Ping Info</strong></p>
<p><code>udf.normalize_glean_ping_info</code></p>
<p><a href="https://github.com/mozilla/bigquery-etl/blob/generated-sql/sql/moz-fx-data-shared-prod/udf/normalize_glean_ping_info">Source Directory</a>  | <a href="https://github.com/mozilla/bigquery-etl/blob/generated-sql/sql/moz-fx-data-shared-prod/udf/normalize_glean_ping_info/metadata.yaml">Metadata File</a> </p>
<hr />
<h2 id="normalize_main_payload"><a href="#normalize_main_payload">normalize_main_payload</a></h2>
<p><strong>Normalize Main Payload</strong></p>
<p><code>udf.normalize_main_payload</code></p>
<p>Accepts a pipeline metadata struct as input and returns a modified struct that includes a few parsed or normalized variants of the input metadata fields.</p>
<p><a href="https://github.com/mozilla/bigquery-etl/blob/generated-sql/sql/moz-fx-data-shared-prod/udf/normalize_main_payload">Source Directory</a>  | <a href="https://github.com/mozilla/bigquery-etl/blob/generated-sql/sql/moz-fx-data-shared-prod/udf/normalize_main_payload/metadata.yaml">Metadata File</a> </p>
<hr />
<h2 id="normalize_metadata"><a href="#normalize_metadata">normalize_metadata</a></h2>
<p><strong>Normalize Metadata</strong></p>
<p><code>udf.normalize_metadata</code></p>
<p><a href="https://github.com/mozilla/bigquery-etl/blob/generated-sql/sql/moz-fx-data-shared-prod/udf/normalize_metadata">Source Directory</a>  | <a href="https://github.com/mozilla/bigquery-etl/blob/generated-sql/sql/moz-fx-data-shared-prod/udf/normalize_metadata/metadata.yaml">Metadata File</a> </p>
<hr />
<h2 id="normalize_monthly_searches"><a href="#normalize_monthly_searches">normalize_monthly_searches</a></h2>
<p><strong>Normalize Monthly Searches</strong></p>
<p><code>udf.normalize_monthly_searches</code></p>
<p>Sum up the monthy search count arrays by normalized engine</p>
<p><a href="https://github.com/mozilla/bigquery-etl/blob/generated-sql/sql/moz-fx-data-shared-prod/udf/normalize_monthly_searches">Source Directory</a>  | <a href="https://github.com/mozilla/bigquery-etl/blob/generated-sql/sql/moz-fx-data-shared-prod/udf/normalize_monthly_searches/metadata.yaml">Metadata File</a> </p>
<hr />
<h2 id="normalize_os"><a href="#normalize_os">normalize_os</a></h2>
<p><strong>Normalize Os</strong></p>
<p><code>udf.normalize_os</code></p>
<p><a href="https://github.com/mozilla/bigquery-etl/blob/generated-sql/sql/moz-fx-data-shared-prod/udf/normalize_os">Source Directory</a>  | <a href="https://github.com/mozilla/bigquery-etl/blob/generated-sql/sql/moz-fx-data-shared-prod/udf/normalize_os/metadata.yaml">Metadata File</a> </p>
<hr />
<h2 id="normalize_search_engine"><a href="#normalize_search_engine">normalize_search_engine</a></h2>
<p><strong>Normalize Search Engine</strong></p>
<p><code>udf.normalize_search_engine</code></p>
<p>Return normalized engine name for recognized engines This is a stub implementation for use with tests; real implementation is in private-bigquery-etl</p>
<p><a href="https://github.com/mozilla/bigquery-etl/blob/generated-sql/sql/moz-fx-data-shared-prod/udf/normalize_search_engine">Source Directory</a>  | <a href="https://github.com/mozilla/bigquery-etl/blob/generated-sql/sql/moz-fx-data-shared-prod/udf/normalize_search_engine/metadata.yaml">Metadata File</a> </p>
<hr />
<h2 id="null_if_empty_list"><a href="#null_if_empty_list">null_if_empty_list</a></h2>
<p><strong>Null If Empty List</strong></p>
<p><code>udf.null_if_empty_list</code></p>
<p>Return NULL if list is empty, otherwise return list. This cannot be done with NULLIF because NULLIF does not support arrays.</p>
<p><a href="https://github.com/mozilla/bigquery-etl/blob/generated-sql/sql/moz-fx-data-shared-prod/udf/null_if_empty_list">Source Directory</a>  | <a href="https://github.com/mozilla/bigquery-etl/blob/generated-sql/sql/moz-fx-data-shared-prod/udf/null_if_empty_list/metadata.yaml">Metadata File</a> </p>
<hr />
<h2 id="one_as_365_bits"><a href="#one_as_365_bits">one_as_365_bits</a></h2>
<p><strong>One As 365 Bits</strong></p>
<p><code>udf.one_as_365_bits</code></p>
<p>One represented as a byte array of 365 bits</p>
<p><a href="https://github.com/mozilla/bigquery-etl/blob/generated-sql/sql/moz-fx-data-shared-prod/udf/one_as_365_bits">Source Directory</a>  | <a href="https://github.com/mozilla/bigquery-etl/blob/generated-sql/sql/moz-fx-data-shared-prod/udf/one_as_365_bits/metadata.yaml">Metadata File</a> </p>
<hr />
<h2 id="pack_event_properties"><a href="#pack_event_properties">pack_event_properties</a></h2>
<p><code>udf.pack_event_properties</code></p>
<p><a href="https://github.com/mozilla/bigquery-etl/blob/generated-sql/sql/moz-fx-data-shared-prod/udf/pack_event_properties">Source Directory</a> </p>
<hr />
<h2 id="parquet_array_sum"><a href="#parquet_array_sum">parquet_array_sum</a></h2>
<p><strong>Parquet Array Sum</strong></p>
<p><code>udf.parquet_array_sum</code></p>
<p>Sum an array from a parquet-derived field. These are lists of an <code>element</code> that contain the field value.</p>
<p><a href="https://github.com/mozilla/bigquery-etl/blob/generated-sql/sql/moz-fx-data-shared-prod/udf/parquet_array_sum">Source Directory</a>  | <a href="https://github.com/mozilla/bigquery-etl/blob/generated-sql/sql/moz-fx-data-shared-prod/udf/parquet_array_sum/metadata.yaml">Metadata File</a> </p>
<hr />
<h2 id="parse_desktop_telemetry_uri"><a href="#parse_desktop_telemetry_uri">parse_desktop_telemetry_uri</a></h2>
<p><strong>Parse Desktop Telemetry Uri</strong></p>
<p><code>udf.parse_desktop_telemetry_uri</code></p>
<p>Parses and labels the components of a telemetry desktop ping submission uri Per https://docs.telemetry.mozilla.org/concepts/pipeline/http_edge_spec.html#special-handling-for-firefox-desktop-telemetry the format is /submit/telemetry/docId/docType/appName/appVersion/appUpdateChannel/appBuildID e.g. /submit/telemetry/ce39b608-f595-4c69-b6a6-f7a436604648/main/Firefox/61.0a1/nightly/20180328030202</p>
<p><a href="https://github.com/mozilla/bigquery-etl/blob/generated-sql/sql/moz-fx-data-shared-prod/udf/parse_desktop_telemetry_uri">Source Directory</a>  | <a href="https://github.com/mozilla/bigquery-etl/blob/generated-sql/sql/moz-fx-data-shared-prod/udf/parse_desktop_telemetry_uri/metadata.yaml">Metadata File</a> </p>
<hr />
<h2 id="parse_iso8601_date"><a href="#parse_iso8601_date">parse_iso8601_date</a></h2>
<p><strong>Parse Iso8601 Date</strong></p>
<p><code>udf.parse_iso8601_date</code></p>
<p>Take a ISO 8601 date or date and time string and return a DATE.  Return null if parse fails.  Possible formats: 2019-11-04, 2019-11-04T21:15:00+00:00, 2019-11-04T21:15:00Z, 20191104T211500Z</p>
<p><a href="https://github.com/mozilla/bigquery-etl/blob/generated-sql/sql/moz-fx-data-shared-prod/udf/parse_iso8601_date">Source Directory</a>  | <a href="https://github.com/mozilla/bigquery-etl/blob/generated-sql/sql/moz-fx-data-shared-prod/udf/parse_iso8601_date/metadata.yaml">Metadata File</a> </p>
<hr />
<h2 id="pos_of_leading_set_bit"><a href="#pos_of_leading_set_bit">pos_of_leading_set_bit</a></h2>
<p><strong>Pos Of Leading Set Bit</strong></p>
<p><code>udf.pos_of_leading_set_bit</code></p>
<p>Returns the 0-based index of the first set bit. No set bits returns NULL.</p>
<p><a href="https://github.com/mozilla/bigquery-etl/blob/generated-sql/sql/moz-fx-data-shared-prod/udf/pos_of_leading_set_bit">Source Directory</a>  | <a href="https://github.com/mozilla/bigquery-etl/blob/generated-sql/sql/moz-fx-data-shared-prod/udf/pos_of_leading_set_bit/metadata.yaml">Metadata File</a> </p>
<hr />
<h2 id="pos_of_trailing_set_bit"><a href="#pos_of_trailing_set_bit">pos_of_trailing_set_bit</a></h2>
<p><strong>Pos Of Trailing Set Bit</strong></p>
<p><code>udf.pos_of_trailing_set_bit</code></p>
<p>Identical to bits28_days_since_seen.  Returns a 0-based index of the rightmost set bit in the passed bit pattern or null if no bits are set (bits = 0).  To determine this position, we take a bitwise AND of the bit pattern and its complement, then we determine the position of the bit via base-2 logarithm; see https://stackoverflow.com/a/42747608/1260237</p>
<p><a href="https://github.com/mozilla/bigquery-etl/blob/generated-sql/sql/moz-fx-data-shared-prod/udf/pos_of_trailing_set_bit">Source Directory</a>  | <a href="https://github.com/mozilla/bigquery-etl/blob/generated-sql/sql/moz-fx-data-shared-prod/udf/pos_of_trailing_set_bit/metadata.yaml">Metadata File</a> </p>
<hr />
<h2 id="product_info_with_baseline"><a href="#product_info_with_baseline">product_info_with_baseline</a></h2>
<p><strong>Product Info with Baseline</strong></p>
<p><code>udf.product_info_with_baseline</code></p>
<p>Similar to mozfun.norm.product_info(), but this UDF also handles "baseline" apps that were introduced differentiate for certain apps whether data is sent through Glean or core pings. This UDF has been temporarily introduced as part of https://bugzilla.mozilla.org/show_bug.cgi?id=1775216</p>
<p><a href="https://github.com/mozilla/bigquery-etl/blob/generated-sql/sql/moz-fx-data-shared-prod/udf/product_info_with_baseline">Source Directory</a>  | <a href="https://github.com/mozilla/bigquery-etl/blob/generated-sql/sql/moz-fx-data-shared-prod/udf/product_info_with_baseline/metadata.yaml">Metadata File</a> </p>
<hr />
<h2 id="quantile_search_metric_contribution"><a href="#quantile_search_metric_contribution">quantile_search_metric_contribution</a></h2>
<p><strong>Quantile Search Metric Contribution</strong></p>
<p><code>udf.quantile_search_metric_contribution</code></p>
<p>This function returns how much of one metric is contributed by the quantile of another metric. Quantile variable should add an offset to get the requried percentile value. Example: udf.quantile_search_metric_contribution(sap, search_with_ads, sap_percentiles[OFFSET(9)]) It returns search_with_ads if sap value in top 10% volumn else null.</p>
<p><a href="https://github.com/mozilla/bigquery-etl/blob/generated-sql/sql/moz-fx-data-shared-prod/udf/quantile_search_metric_contribution">Source Directory</a>  | <a href="https://github.com/mozilla/bigquery-etl/blob/generated-sql/sql/moz-fx-data-shared-prod/udf/quantile_search_metric_contribution/metadata.yaml">Metadata File</a> </p>
<hr />
<h2 id="round_timestamp_to_minute"><a href="#round_timestamp_to_minute">round_timestamp_to_minute</a></h2>
<p><strong>Round Timestamp To Minute</strong></p>
<p><code>udf.round_timestamp_to_minute</code></p>
<p>Floor a timestamp object to the given minute interval.</p>
<p><a href="https://github.com/mozilla/bigquery-etl/blob/generated-sql/sql/moz-fx-data-shared-prod/udf/round_timestamp_to_minute">Source Directory</a>  | <a href="https://github.com/mozilla/bigquery-etl/blob/generated-sql/sql/moz-fx-data-shared-prod/udf/round_timestamp_to_minute/metadata.yaml">Metadata File</a> </p>
<hr />
<h2 id="safe_crc32_uuid"><a href="#safe_crc32_uuid">safe_crc32_uuid</a></h2>
<p><strong>Safe CRC-32 Uuid</strong></p>
<p><code>udf.safe_crc32_uuid</code></p>
<p>Calculate the CRC-32 hash of a 36-byte UUID, or NULL if the value isn't 36 bytes.  This implementation is limited to an exact length because recursion does not work. Based on https://stackoverflow.com/a/18639999/1260237 See https://en.wikipedia.org/wiki/Cyclic_redundancy_check</p>
<p><a href="https://github.com/mozilla/bigquery-etl/blob/generated-sql/sql/moz-fx-data-shared-prod/udf/safe_crc32_uuid">Source Directory</a>  | <a href="https://github.com/mozilla/bigquery-etl/blob/generated-sql/sql/moz-fx-data-shared-prod/udf/safe_crc32_uuid/metadata.yaml">Metadata File</a> </p>
<hr />
<h2 id="safe_sample_id"><a href="#safe_sample_id">safe_sample_id</a></h2>
<p><strong>Safe Sample Id</strong></p>
<p><code>udf.safe_sample_id</code></p>
<p>Stably hash a client_id to an integer between 0 and 99, or NULL if client_id isn't 36 bytes</p>
<p><a href="https://github.com/mozilla/bigquery-etl/blob/generated-sql/sql/moz-fx-data-shared-prod/udf/safe_sample_id">Source Directory</a>  | <a href="https://github.com/mozilla/bigquery-etl/blob/generated-sql/sql/moz-fx-data-shared-prod/udf/safe_sample_id/metadata.yaml">Metadata File</a> </p>
<hr />
<h2 id="search_counts_map_sum"><a href="#search_counts_map_sum">search_counts_map_sum</a></h2>
<p><strong>Search Counts Map Sum</strong></p>
<p><code>udf.search_counts_map_sum</code></p>
<p>Calculate the sums of search counts per source and engine</p>
<p><a href="https://github.com/mozilla/bigquery-etl/blob/generated-sql/sql/moz-fx-data-shared-prod/udf/search_counts_map_sum">Source Directory</a>  | <a href="https://github.com/mozilla/bigquery-etl/blob/generated-sql/sql/moz-fx-data-shared-prod/udf/search_counts_map_sum/metadata.yaml">Metadata File</a> </p>
<hr />
<h2 id="shift_28_bits_one_day"><a href="#shift_28_bits_one_day">shift_28_bits_one_day</a></h2>
<p><strong>Shift 28 Bits One Day</strong></p>
<p><code>udf.shift_28_bits_one_day</code></p>
<p>Shift input bits one day left and drop any bits beyond 28 days.</p>
<p><a href="https://github.com/mozilla/bigquery-etl/blob/generated-sql/sql/moz-fx-data-shared-prod/udf/shift_28_bits_one_day">Source Directory</a>  | <a href="https://github.com/mozilla/bigquery-etl/blob/generated-sql/sql/moz-fx-data-shared-prod/udf/shift_28_bits_one_day/metadata.yaml">Metadata File</a> </p>
<hr />
<h2 id="shift_365_bits_one_day"><a href="#shift_365_bits_one_day">shift_365_bits_one_day</a></h2>
<p><strong>Shift 365 Bits One Day</strong></p>
<p><code>udf.shift_365_bits_one_day</code></p>
<p>Shift input bits one day left and drop any bits beyond 365 days.</p>
<p><a href="https://github.com/mozilla/bigquery-etl/blob/generated-sql/sql/moz-fx-data-shared-prod/udf/shift_365_bits_one_day">Source Directory</a>  | <a href="https://github.com/mozilla/bigquery-etl/blob/generated-sql/sql/moz-fx-data-shared-prod/udf/shift_365_bits_one_day/metadata.yaml">Metadata File</a> </p>
<hr />
<h2 id="shift_one_day"><a href="#shift_one_day">shift_one_day</a></h2>
<p><strong>Shift One Day</strong></p>
<p><code>udf.shift_one_day</code></p>
<p>Returns the bitfield shifted by one day, 0 for NULL</p>
<p><a href="https://github.com/mozilla/bigquery-etl/blob/generated-sql/sql/moz-fx-data-shared-prod/udf/shift_one_day">Source Directory</a>  | <a href="https://github.com/mozilla/bigquery-etl/blob/generated-sql/sql/moz-fx-data-shared-prod/udf/shift_one_day/metadata.yaml">Metadata File</a> </p>
<hr />
<h2 id="smoot_usage_from_28_bits"><a href="#smoot_usage_from_28_bits">smoot_usage_from_28_bits</a></h2>
<p><strong>Smoot Usage From 28 Bits</strong></p>
<p><code>udf.smoot_usage_from_28_bits</code></p>
<p>Calculates a variety of metrics based on bit patterns of daily usage for the smoot_usage_* tables.</p>
<p><a href="https://github.com/mozilla/bigquery-etl/blob/generated-sql/sql/moz-fx-data-shared-prod/udf/smoot_usage_from_28_bits">Source Directory</a>  | <a href="https://github.com/mozilla/bigquery-etl/blob/generated-sql/sql/moz-fx-data-shared-prod/udf/smoot_usage_from_28_bits/metadata.yaml">Metadata File</a> </p>
<hr />
<h2 id="vector_add"><a href="#vector_add">vector_add</a></h2>
<p><strong>Vector Add</strong></p>
<p><code>udf.vector_add</code></p>
<p>This function adds two vectors. The two vectors can have different length. If one vector is null, the other vector will be returned directly.</p>
<p><a href="https://github.com/mozilla/bigquery-etl/blob/generated-sql/sql/moz-fx-data-shared-prod/udf/vector_add">Source Directory</a>  | <a href="https://github.com/mozilla/bigquery-etl/blob/generated-sql/sql/moz-fx-data-shared-prod/udf/vector_add/metadata.yaml">Metadata File</a> </p>
<hr />
<h2 id="zero_as_365_bits"><a href="#zero_as_365_bits">zero_as_365_bits</a></h2>
<p><strong>Zero As 365 Bits</strong></p>
<p><code>udf.zero_as_365_bits</code></p>
<p>Zero represented as a 365-bit byte array</p>
<p><a href="https://github.com/mozilla/bigquery-etl/blob/generated-sql/sql/moz-fx-data-shared-prod/udf/zero_as_365_bits">Source Directory</a>  | <a href="https://github.com/mozilla/bigquery-etl/blob/generated-sql/sql/moz-fx-data-shared-prod/udf/zero_as_365_bits/metadata.yaml">Metadata File</a> </p>
<hr />
<h2 id="zeroed_array"><a href="#zeroed_array">zeroed_array</a></h2>
<p><strong>Zeroed Array</strong></p>
<p><code>udf.zeroed_array</code></p>
<p>Generates an array if all zeroes, of arbitrary length</p>
<p><a href="https://github.com/mozilla/bigquery-etl/blob/generated-sql/sql/moz-fx-data-shared-prod/udf/zeroed_array">Source Directory</a>  | <a href="https://github.com/mozilla/bigquery-etl/blob/generated-sql/sql/moz-fx-data-shared-prod/udf/zeroed_array/metadata.yaml">Metadata File</a> </p>
<hr />





                
              </article>
            </div>
          
          
        </div>
        
      </main>
      
        <footer class="md-footer">
  
    
    <nav class="md-footer__inner md-grid" aria-label="Footer" >
      
        
        <a href="../treeherder/" class="md-footer__link md-footer__link--prev" aria-label="Previous: treeherder" rel="prev">
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
          </div>
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                Previous
              </span>
              treeherder
            </div>
          </div>
        </a>
      
      
        
        <a href="../udf_js/" class="md-footer__link md-footer__link--next" aria-label="Next: User-Defined Functions (Javascript)" rel="next">
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                Next
              </span>
              User-Defined Functions (Javascript)
            </div>
          </div>
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4Z"/></svg>
          </div>
        </a>
      
    </nav>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    <script id="__config" type="application/json">{"base": "../..", "features": ["navigation.tabs"], "search": "../../assets/javascripts/workers/search.16e2a7d4.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.placeholder": "Search", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version.title": "Select version"}}</script>
    
    
      <script src="../../assets/javascripts/bundle.8492ddcf.min.js"></script>
      
    
  </body>
</html>